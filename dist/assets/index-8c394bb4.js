import{e as N,u as ze,S as ne,E as re,_ as R,k as P,h as Ce,F as Ge,G as Je,v as xe,L as J,H as Ze,I as we,J as L,K as $e,M as Qe,q as De,g as et,f as Ve,N as he,r as Ee,O as Ie,P as tt,t as me,j as ot}from"./index-764fcd0d.js";import{h as A,aa as j,z as e,q as p,o as i,k as B,W as I,l as ae,U as T,O as C,$ as D,Y as le,Z as E,P as l,p as n,m as _,N as te,w as Z,r as O,j as Q,E as X,ad as ue,n as ee,D as Ae,_ as K,ae as Ne,af as Te,ag as nt,a0 as Pe,a8 as se,V as M,a1 as qe,a2 as Ue,F as We,X as at,ah as lt,ai as st,aj as rt,ak as Se,al as He,ac as ut,am as ct,an as it,i as dt}from"./vue-7c431e9b.js";import{_ as mt,D as _t}from"./darkSwitch-0a6431db.js";import{c as pt,o as Re,g as Oe,r as _e,s as ft,a as vt}from"./router-8d86a49d.js";import{s as ke,m as gt}from"./layout-2cebf364.js";import{I as yt}from"./index-5273c60c.js";import{t as bt}from"./useDark-fd3fbc32.js";import{a as ht,i as Ct}from"./index-5732cbd7.js";import{F as ie}from"./index-4e8a24f3.js";import"./index-4c4c8153.js";const kt={class:"layout-logo"},xt={key:0,class:"logo-img",src:mt,alt:"logo"},wt=A({__name:"logo",setup(g){j(s=>({adf9ae48:e(t).layout.layoutMode!="Streamline"?e(t).getColorVal("menuTopBarBackground"):"transparent"}));const t=N(),o=ze(),u=function(){t.layout.shrink&&!t.layout.menuCollapse&&pt(),t.setLayout("menuCollapse",!t.layout.menuCollapse),ne.set(re,{layoutMode:t.layout.layoutMode,menuCollapse:t.layout.menuCollapse}),setTimeout(()=>{ke()},350)};return(s,m)=>{const f=p("Icon");return i(),B("div",kt,[e(t).layout.menuCollapse?I("",!0):(i(),B("img",xt)),e(t).layout.menuCollapse?I("",!0):(i(),B("div",{key:1,style:ae({color:e(t).getColorVal("menuActiveColor")}),class:"website-name"},T(e(o).siteName),5)),e(t).layout.layoutMode!="Streamline"?(i(),C(f,{key:2,onClick:u,name:e(t).layout.menuCollapse?"fa fa-indent":"fa fa-dedent",class:D([e(t).layout.menuCollapse?"unfold":"","fold"]),color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["name","class","color"])):I("",!0)])}}});const Ke=R(wt,[["__scopeId","data-v-38fd2478"]]),Tt=A({__name:"menuTree",props:{menus:{default:()=>[]}},setup(g){const t=g;j(s=>({20955865:e(o).getColorVal("menuActiveBackground")}));const o=N(),u=s=>{var m;["Streamline","Double"].includes(o.layout.layoutMode)&&((m=s.children)!=null&&m.length)&&Re(s.children[0])};return(s,m)=>{const f=p("Icon"),k=p("menu-tree",!0),b=p("el-sub-menu"),c=p("el-menu-item");return i(!0),B(E,null,le(t.menus,d=>(i(),B(E,null,[d.children&&d.children.length>0?(i(),C(b,{onClick:v=>u(d),index:d.path,key:d.path},{title:l(()=>{var v,a,r,V;return[n(f,{color:e(o).getColorVal("menuColor"),name:(v=d.meta)!=null&&v.icon?(a=d.meta)==null?void 0:a.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),_("span",null,T((r=d.meta)!=null&&r.title?(V=d.meta)==null?void 0:V.title:s.$t("noTitle")),1)]}),default:l(()=>[n(k,{menus:d.children},null,8,["menus"])]),_:2},1032,["onClick","index"])):(i(),C(c,{index:d.path,key:d.path,onClick:v=>e(Re)(d)},{default:l(()=>{var v,a,r,V;return[n(f,{color:e(o).getColorVal("menuColor"),name:(v=d.meta)!=null&&v.icon?(a=d.meta)==null?void 0:a.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),_("span",null,T((r=d.meta)!=null&&r.title?(V=d.meta)==null?void 0:V.title:s.$t("noTitle")),1)]}),_:2},1032,["index","onClick"]))],64))),256)}}});const pe=R(Tt,[["__scopeId","data-v-f95e303f"]]),St=A({__name:"menuVertical",setup(g){j(c=>({"4ac75b46":f.value,fc15b866:e(t).getColorVal("menuBackground"),"5a437bdc":e(t).getColorVal("menuColor"),"1fda8a2c":e(t).getColorVal("menuActiveColor")}));const t=N(),o=P(),u=te(),s=Z(),m=O({defaultActive:""}),f=Q(()=>{let c=0;return t.layout.menuShowTopBar&&(c=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+c)+"px)":"calc(100vh - "+c+"px)"}),k=c=>{m.defaultActive=c.path},b=()=>{ee(()=>{var d;let c=document.querySelector(".el-menu.layouts-menu-vertical li.is-active");if(!c)return!1;(d=s.value)==null||d.setScrollTop(c.offsetTop)})};return X(()=>{k(u),b()}),ue(c=>{k(c)}),(c,d)=>{const v=p("el-menu"),a=p("el-scrollbar");return i(),C(a,{ref_key:"verticalMenusRef",ref:s,class:"vertical-menus-scrollbar"},{default:l(()=>[n(v,{class:"layouts-menu-vertical","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":m.defaultActive,collapse:e(t).layout.menuCollapse},{default:l(()=>[n(pe,{menus:e(o).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}});const Be=(g,t)=>{for(let o=0;o<t.length;o++){const u=t[o];if(u.path==g||u.children&&u.children.length>0&&Be(g,u.children))return u}return!1},Bt=A({__name:"menuVerticalChildren",setup(g){j(c=>({"676a4508":f.value,"5173dffa":e(t).getColorVal("menuBackground"),"79ac0c1c":e(t).getColorVal("menuColor"),"74a724b6":e(t).getColorVal("menuActiveColor")}));const t=N(),o=P(),u=te(),s=Z(),m=O({defaultActive:"",routeChildren:[]}),f=Q(()=>{let c=0;return t.layout.menuShowTopBar&&(c=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+c)+"px)":"calc(100vh - "+c+"px)"}),k=c=>{let d=Be(c.path,o.state.tabsViewRoutes);d?(m.defaultActive=c.path,d.children&&d.children.length>0?m.routeChildren=d.children:m.routeChildren=[d]):m.routeChildren||(m.routeChildren=o.state.tabsViewRoutes)},b=()=>{ee(()=>{var d;let c=document.querySelector(".el-menu.layouts-menu-vertical-children li.is-active");if(!c)return!1;(d=s.value)==null||d.setScrollTop(c.offsetTop)})};return X(()=>{k(u),b()}),ue(c=>{k(c)}),(c,d)=>{const v=p("el-menu"),a=p("el-scrollbar");return i(),C(a,{ref_key:"verticalMenusRef",ref:s,class:"children-vertical-menus-scrollbar"},{default:l(()=>[n(v,{class:"layouts-menu-vertical-children","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":m.defaultActive,collapse:e(t).layout.menuCollapse},{default:l(()=>[m.routeChildren.length>0?(i(),C(pe,{key:0,menus:m.routeChildren},null,8,["menus"])):I("",!0)]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}});const Mt=A({name:"layout/aside",__name:"aside",setup(g){j(s=>({"12d2a223":u.value}));const t=N(),o=P(),u=Q(()=>t.menuWidth());return(s,m)=>{const f=p("el-aside");return e(o).state.tabFullScreen?I("",!0):(i(),C(f,{key:0,class:D("layout-aside-"+e(t).layout.layoutMode+" "+(e(t).layout.shrink?"shrink":""))},{default:l(()=>[e(t).layout.menuShowTopBar?(i(),C(Ke,{key:0})):I("",!0),e(t).layout.layoutMode=="Double"?(i(),C(Bt,{key:1})):(i(),C(St,{key:2}))]),_:1},8,["class"]))}}});const Me=R(Mt,[["__scopeId","data-v-be977e32"]]);function je(){if(!Ae())throw new Error("useCurrentInstance() can only be used inside setup() or functional components!");const{appContext:g}=Ae();return{proxy:g.config.globalProperties}}const $t={class:"el-dropdown-menu"},Vt=["onClick"],It=A({__name:"index",props:{width:{default:150},items:{default:()=>[]}},emits:["contextmenuItemClick"],setup(g,{expose:t,emit:o}){const u=g,s=O({show:!1,axis:{x:0,y:0},menu:void 0,arrowAxis:10}),m=(b,c)=>{s.menu=b,s.axis=c,s.show=!0},f=b=>{b.disabled||(b.menu=nt(s.menu),o("contextmenuItemClick",b))},k=()=>{s.show=!1};return t({onShowContextmenu:m,onHideContextmenu:k}),X(()=>{Ce(document,"click",k)}),(b,c)=>{const d=p("Icon");return i(),C(Te,{name:"el-zoom-in-center"},{default:l(()=>[K((i(),B("div",{class:"el-popper is-pure is-light el-dropdown__popper ba-contextmenu",style:ae(`top: ${s.axis.y+5}px;left: ${s.axis.x-14}px;width:${u.width}px`),key:Math.random(),"aria-hidden":"false","data-popper-placement":"bottom"},[_("ul",$t,[(i(!0),B(E,null,le(u.items,(v,a)=>(i(),B("li",{key:a,class:D(["el-dropdown-menu__item",v.disabled?"is-disabled":""]),tabindex:"-1",onClick:r=>f(v)},[n(d,{size:"12",name:v.icon},null,8,["name"]),_("span",null,T(v.label),1)],10,Vt))),128))]),_("span",{class:"el-popper__arrow",style:ae({left:`${s.arrowAxis}px`})},null,4)],4)),[[Ne,s.show]])]),_:1})}}});const At=R(It,[["__scopeId","data-v-b68cb97f"]]),Rt=["onClick","onContextmenu"],Ft=A({__name:"tabs",setup(g){j(h=>({"2345f147":e(u).getColorVal("headerBarTabColor"),c5a584be:e(u).getColorVal("headerBarTabActiveColor"),"683c7ffc":e(u).layout.layoutMode=="Default"?"none":e(u).getColorVal("headerBarBackground")}));const t=te(),o=Pe(),u=N(),s=P(),{proxy:m}=je(),f=Z(),k=Ge(),b=Z(),c=O({contextmenuItems:[{name:"refresh",label:"重新加载",icon:"fa fa-refresh"},{name:"close",label:"关闭标签",icon:"fa fa-times"},{name:"fullScreen",label:"当前标签全屏",icon:"el-icon-FullScreen"},{name:"closeOther",label:"关闭其他标签",icon:"fa fa-minus"},{name:"closeAll",label:"关闭全部标签",icon:"fa fa-stop"}]}),d=O({width:"0",transform:"translateX(0px)"}),v=h=>{o.push(h)},a=(h,$)=>{c.contextmenuItems[0].disabled=t.path!==h.path,c.contextmenuItems[4].disabled=c.contextmenuItems[3].disabled=s.state.tabsView.length==1;const{clientX:S,clientY:W}=$;b.value.onShowContextmenu(h,{x:S,y:W})},r=function(h){if(!h)return!1;d.width=h.clientWidth+"px",d.transform=`translateX(${h.offsetLeft}px)`;let $=h.offsetLeft+h.clientWidth-f.value.clientWidth;h.offsetLeft<f.value.scrollLeft?f.value.scrollTo(h.offsetLeft,0):$>f.value.scrollLeft&&f.value.scrollTo($,0)},V=()=>{const h=s.state.tabsView.slice(-1)[0];h?o.push(h):o.push("/admin")},q=h=>{var $;s.closeTab(h),m.eventBus.emit("onTabViewClose",h),(($=s.state.activeRoute)==null?void 0:$.path)===h.path?V():(s.setActiveRoute(s.state.activeRoute),ee(()=>{r(k.value[s.state.activeIndex])})),b.value.onHideContextmenu()},x=h=>{var $;s.closeTabs(h),s.setActiveRoute(h),(($=s.state.activeRoute)==null?void 0:$.path)!==t.path&&o.push(h.path)},U=h=>{var S;let $=Oe(s.state.tabsViewRoutes);if($&&$.path==h.path)return x(h);if($&&$.path==((S=s.state.activeRoute)==null?void 0:S.path))return x(s.state.activeRoute);s.closeTabs(!1),$&&_e($.path)},G=async h=>{const{name:$,menu:S}=h;if(S)switch($){case"refresh":m.eventBus.emit("onTabViewRefresh",S);break;case"close":q(S);break;case"closeOther":x(S);break;case"closeAll":U(S);break;case"fullScreen":t.path!==(S==null?void 0:S.path)&&o.push(S==null?void 0:S.path),s.setFullScreen(!0);break}},F=function(h){s.addTab(h),s.setActiveRoute(h),ee(()=>{r(k.value[s.state.activeIndex])})};return ue(async h=>{F(h)}),X(()=>{F(o.currentRoute.value),new Je(f.value)}),(h,$)=>{const S=p("Icon");return i(),B(E,null,[_("div",{class:"nav-tabs",ref_key:"tabScrollbarRef",ref:f},[(i(!0),B(E,null,le(e(s).state.tabsView,(W,oe)=>(i(),B("div",{onClick:z=>v(W),onContextmenu:se(z=>a(W,z),["prevent"]),class:D(["ba-nav-tab",e(s).state.activeIndex==oe?"active":""]),ref_for:!0,ref:e(k).set,key:oe},[M(T(W.meta.title)+" ",1),n(Te,{onAfterLeave:$[0]||($[0]=z=>r(e(k)[e(s).state.activeIndex])),name:"el-fade-in"},{default:l(()=>[K(n(S,{class:"close-icon",onClick:se(z=>q(W),["stop"]),size:"15",name:"el-icon-Close"},null,8,["onClick"]),[[Ne,e(s).state.tabsView.length>1]])]),_:2},1024)],42,Rt))),128)),_("div",{style:ae(d),class:"nav-tabs-active-box"},null,4)],512),n(At,{ref_key:"contextmenuRef",ref:b,items:c.contextmenuItems,onContextmenuItemClick:G},null,8,["items"])],64)}}});const Xe=R(Ft,[["__scopeId","data-v-4a289cba"]]),Fe=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Y=(()=>{if(typeof document>"u")return!1;const g=Fe[0],t={};for(const o of Fe)if((o==null?void 0:o[1])in document){for(const[s,m]of o.entries())t[g[s]]=m;return t}return!1})(),Le={change:Y.fullscreenchange,error:Y.fullscreenerror};let H={request(g=document.documentElement,t){return new Promise((o,u)=>{const s=()=>{H.off("change",s),o()};H.on("change",s);const m=g[Y.requestFullscreen](t);m instanceof Promise&&m.then(s).catch(u)})},exit(){return new Promise((g,t)=>{if(!H.isFullscreen){g();return}const o=()=>{H.off("change",o),g()};H.on("change",o);const u=document[Y.exitFullscreen]();u instanceof Promise&&u.then(o).catch(t)})},toggle(g,t){return H.isFullscreen?H.exit():H.request(g,t)},onchange(g){H.on("change",g)},onerror(g){H.on("error",g)},on(g,t){const o=Le[g];o&&document.addEventListener(o,t,!1)},off(g,t){const o=Le[g];o&&document.removeEventListener(o,t,!1)},raw:Y};Object.defineProperties(H,{isFullscreen:{get:()=>!!document[Y.fullscreenElement]},element:{enumerable:!0,get:()=>document[Y.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[Y.fullscreenEnabled]}});Y||(H={isEnabled:!1});const de=H,fe=g=>(qe("data-v-bac0a267"),g=g(),Ue(),g),Lt={class:"layout-config-drawer"},zt={class:"layout-mode-styles-box"},Dt={class:"layout-mode-box-style"},Et=fe(()=>_("div",{class:"layout-mode-style-box"},[_("div",{class:"layout-mode-style-aside"}),_("div",{class:"layout-mode-style-container-box"},[_("div",{class:"layout-mode-style-header"}),_("div",{class:"layout-mode-style-container"})])],-1)),Nt={class:"layout-mode-style-name"},Pt=fe(()=>_("div",{class:"layout-mode-style-box"},[_("div",{class:"layout-mode-style-aside"}),_("div",{class:"layout-mode-style-container-box"},[_("div",{class:"layout-mode-style-header"}),_("div",{class:"layout-mode-style-container"})])],-1)),qt={class:"layout-mode-style-name"},Ut=fe(()=>_("div",{class:"layout-mode-style-box"},[_("div",{class:"layout-mode-style-container-box"},[_("div",{class:"layout-mode-style-header"}),_("div",{class:"layout-mode-style-container"})])],-1)),Wt={class:"layout-mode-style-name"},Ht=fe(()=>_("div",{class:"layout-mode-style-box"},[_("div",{class:"layout-mode-style-aside"}),_("div",{class:"layout-mode-style-container-box"},[_("div",{class:"layout-mode-style-header"}),_("div",{class:"layout-mode-style-container"})])],-1)),Ot={class:"layout-mode-style-name"},Kt={class:"layout-config-global"},jt={class:"layout-config-aside"},Xt={class:"layout-config-aside"},Yt={class:"ba-center"},Gt=A({__name:"config",setup(g){const{t}=xe(),o=N(),u=P(),s=Pe(),m=(v,a)=>{o.setLayout(a,v)},f=(v,a)=>{if(v===null)return;const r=o.layout[a];o.layout.isDark?r[1]=v:r[0]=v,o.setLayout(a,r)},k=v=>{ne.set(re,{layoutMode:v,menuCollapse:o.layout.menuCollapse}),o.setLayoutMode(v)},b=(v,a)=>{o.setLayout(a,v);const r=u.state.tabsViewRoutes;u.setTabsViewRoutes([]),setTimeout(()=>{u.setTabsViewRoutes(r)},200)},c=()=>{o.setLayout("showDrawer",!1)},d=()=>{J.remove(Ze),ne.remove(re),s.go(0)};return(v,a)=>{const r=p("el-divider"),V=p("el-col"),q=p("el-row"),x=p("el-form-item"),U=p("el-option"),G=p("el-select"),F=p("el-color-picker"),h=p("el-switch"),$=p("el-input"),S=p("el-button"),W=p("el-popconfirm"),oe=p("el-form"),z=p("el-scrollbar"),y=p("el-drawer");return i(),B("div",Lt,[n(y,{"model-value":e(o).layout.showDrawer,title:e(t)("layouts.Layout configuration"),size:"310px",onClose:c},{default:l(()=>[n(z,{class:"layout-mode-style-scrollbar"},{default:l(()=>[n(oe,{ref:"formRef",model:e(o).layout},{default:l(()=>[_("div",zt,[n(r,{"border-style":"dashed"},{default:l(()=>[M(T(e(t)("layouts.Layout mode")),1)]),_:1}),_("div",Dt,[n(q,{class:"layout-mode-box-style-row",gutter:10},{default:l(()=>[n(V,{span:12},{default:l(()=>[_("div",{onClick:a[0]||(a[0]=w=>k("Default")),class:D(["layout-mode-style default",e(o).layout.layoutMode=="Default"?"active":""])},[Et,_("div",Nt,T(e(t)("layouts.default")),1)],2)]),_:1}),n(V,{span:12},{default:l(()=>[_("div",{onClick:a[1]||(a[1]=w=>k("Classic")),class:D(["layout-mode-style classic",e(o).layout.layoutMode=="Classic"?"active":""])},[Pt,_("div",qt,T(e(t)("layouts.classic")),1)],2)]),_:1})]),_:1}),n(q,{gutter:10},{default:l(()=>[n(V,{span:12},{default:l(()=>[_("div",{onClick:a[2]||(a[2]=w=>k("Streamline")),class:D(["layout-mode-style streamline",e(o).layout.layoutMode=="Streamline"?"active":""])},[Ut,_("div",Wt,T(e(t)("layouts.Single column")),1)],2)]),_:1}),n(V,{span:12},{default:l(()=>[_("div",{onClick:a[3]||(a[3]=w=>k("Double")),class:D(["layout-mode-style double",e(o).layout.layoutMode=="Double"?"active":""])},[Ht,_("div",Ot,T(e(t)("layouts.Double column")),1)],2)]),_:1})]),_:1})]),n(r,{"border-style":"dashed"},{default:l(()=>[M(T(e(t)("layouts.overall situation")),1)]),_:1}),_("div",Kt,[n(x,{size:"large",label:e(t)("layouts.Dark mode")},{default:l(()=>[n(_t,{onClick:a[4]||(a[4]=w=>e(bt)())})]),_:1},8,["label"]),n(x,{label:e(t)("layouts.Background page switching animation")},{default:l(()=>[n(G,{onChange:a[5]||(a[5]=w=>m(w,"mainAnimation")),"model-value":e(o).layout.mainAnimation,placeholder:e(t)("layouts.Please select an animation name")},{default:l(()=>[n(U,{label:"slide-right",value:"slide-right"}),n(U,{label:"slide-left",value:"slide-left"}),n(U,{label:"el-fade-in-linear",value:"el-fade-in-linear"}),n(U,{label:"el-fade-in",value:"el-fade-in"}),n(U,{label:"el-zoom-in-center",value:"el-zoom-in-center"}),n(U,{label:"el-zoom-in-top",value:"el-zoom-in-top"}),n(U,{label:"el-zoom-in-bottom",value:"el-zoom-in-bottom"})]),_:1},8,["model-value","placeholder"])]),_:1},8,["label"])]),n(r,{"border-style":"dashed"},{default:l(()=>[M(T(e(t)("layouts.sidebar")),1)]),_:1}),_("div",jt,[n(x,{label:e(t)("layouts.Side menu bar background color")},{default:l(()=>[n(F,{onChange:a[6]||(a[6]=w=>f(w,"menuBackground")),"model-value":e(o).getColorVal("menuBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(x,{label:e(t)("layouts.Side menu text color")},{default:l(()=>[n(F,{onChange:a[7]||(a[7]=w=>f(w,"menuColor")),"model-value":e(o).getColorVal("menuColor")},null,8,["model-value"])]),_:1},8,["label"]),n(x,{label:e(t)("layouts.Side menu active item background color")},{default:l(()=>[n(F,{onChange:a[8]||(a[8]=w=>f(w,"menuActiveBackground")),"model-value":e(o).getColorVal("menuActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(x,{label:e(t)("layouts.Side menu active item text color")},{default:l(()=>[n(F,{onChange:a[9]||(a[9]=w=>f(w,"menuActiveColor")),"model-value":e(o).getColorVal("menuActiveColor")},null,8,["model-value"])]),_:1},8,["label"]),n(x,{label:e(t)("layouts.Show side menu top bar (logo bar)")},{default:l(()=>[n(h,{onChange:a[10]||(a[10]=w=>m(w,"menuShowTopBar")),"model-value":e(o).layout.menuShowTopBar},null,8,["model-value"])]),_:1},8,["label"]),n(x,{label:e(t)("layouts.Side menu top bar background color")},{default:l(()=>[n(F,{onChange:a[11]||(a[11]=w=>f(w,"menuTopBarBackground")),"model-value":e(o).getColorVal("menuTopBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(x,{label:e(t)("layouts.Side menu width (when expanded)")},{default:l(()=>[n($,{onInput:a[12]||(a[12]=w=>m(w,"menuWidth")),type:"number",step:10,"model-value":e(o).layout.menuWidth},{append:l(()=>[M("px")]),_:1},8,["model-value"])]),_:1},8,["label"]),n(x,{label:e(t)("layouts.Side menu default icon")},{default:l(()=>[n(yt,{onChange:a[13]||(a[13]=w=>b(w,"menuDefaultIcon")),"model-value":e(o).layout.menuDefaultIcon},null,8,["model-value"])]),_:1},8,["label"]),n(x,{label:e(t)("layouts.Side menu horizontal collapse")},{default:l(()=>[n(h,{onChange:a[14]||(a[14]=w=>m(w,"menuCollapse")),"model-value":e(o).layout.menuCollapse},null,8,["model-value"])]),_:1},8,["label"]),n(x,{label:e(t)("layouts.Side menu accordion")},{default:l(()=>[n(h,{onChange:a[15]||(a[15]=w=>m(w,"menuUniqueOpened")),"model-value":e(o).layout.menuUniqueOpened},null,8,["model-value"])]),_:1},8,["label"])]),n(r,{"border-style":"dashed"},{default:l(()=>[M(T(e(t)("layouts.Top bar")),1)]),_:1}),_("div",Xt,[n(x,{label:e(t)("layouts.Top bar background color")},{default:l(()=>[n(F,{onChange:a[16]||(a[16]=w=>f(w,"headerBarBackground")),"model-value":e(o).getColorVal("headerBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(x,{label:e(t)("layouts.Top bar text color")},{default:l(()=>[n(F,{onChange:a[17]||(a[17]=w=>f(w,"headerBarTabColor")),"model-value":e(o).getColorVal("headerBarTabColor")},null,8,["model-value"])]),_:1},8,["label"]),n(x,{label:e(t)("layouts.Background color when hovering over the top bar")},{default:l(()=>[n(F,{onChange:a[18]||(a[18]=w=>f(w,"headerBarHoverBackground")),"model-value":e(o).getColorVal("headerBarHoverBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(x,{label:e(t)("layouts.Top bar menu active item background color")},{default:l(()=>[n(F,{onChange:a[19]||(a[19]=w=>f(w,"headerBarTabActiveBackground")),"model-value":e(o).getColorVal("headerBarTabActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(x,{label:e(t)("layouts.Top bar menu active item text color")},{default:l(()=>[n(F,{onChange:a[20]||(a[20]=w=>f(w,"headerBarTabActiveColor")),"model-value":e(o).getColorVal("headerBarTabActiveColor")},null,8,["model-value"])]),_:1},8,["label"])]),n(W,{onConfirm:d,title:e(t)("layouts.Are you sure you want to restore all configurations to the default values?")},{reference:l(()=>[_("div",Yt,[n(S,{class:"w80",type:"info"},{default:l(()=>[M(T(e(t)("layouts.Restore default")),1)]),_:1})])]),_:1},8,["title"])])]),_:1},8,["model"])]),_:1})]),_:1},8,["model-value","title"])])}}});const Jt=R(Gt,[["__scopeId","data-v-bac0a267"]]),Zt={class:"command"},Qt={class:"task-opt"},eo=["onClick"],to={class:"indent-2"},oo={class:"package-manager-dialog-footer"},no={class:"config-buttons"},ao=A({__name:"index",setup(g){const{t}=xe(),o=we(),u=O({terminalWarning:"",port:o.state.port,menuExpand:document.documentElement.clientWidth>1840}),s=Q(()=>{let a=o.state.port==""?"80":o.state.port;return a=="8000"?"php think run":"php think run -p "+a}),m=Q(()=>{let a=o.state.port==""?"":":"+o.state.port;return"http://localhost"+a+" "+t("terminal.or")+" http://"+t("terminal.Site domain name")+a}),f=a=>{$e({port:a}).then(r=>{r.code==1?(o.changePort(a),v()):u.port=o.state.port}).catch(()=>{u.port=o.state.port})},k=a=>{let r=t("terminal.unknown"),V="info";switch(a){case L.Waiting:r=t("terminal.Waiting for execution"),V="info";break;case L.Connecting:r=t("terminal.Connecting"),V="warning";break;case L.Executing:r=t("terminal.Executing"),V="warning";break;case L.Success:r=t("terminal.Successful execution"),V="success";break;case L.Failed:r=t("terminal.Execution failed"),V="danger";break;case L.Unknown:r=t("terminal.Unknown execution result"),V="danger";break}return{statusText:r,statusType:V}},b=()=>{st.confirm(t("terminal.Are you sure you want to republish?"),t("Reminder"),{confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),type:"warning"}).then(()=>{o.addTaskPM("web-build")})},c=a=>{$e({manager:a}).then(r=>{r.code==1&&o.changePackageManager(a)}),o.togglePackageManagerDialog(!1)},d=a=>{u.terminalWarning=a},v=()=>{Qe()!=o.state.port?d(t("terminal.The current terminal is not running under the installation service, and some commands may not be executed")):d("")};return We(()=>o.state.port,a=>{a!=u.port&&(u.port=a,v())}),X(()=>{v()}),(a,r)=>{const V=p("el-alert"),q=p("el-tag"),x=p("el-button"),U=p("Icon"),G=p("el-card"),F=p("el-timeline-item"),h=p("el-timeline"),$=p("el-empty"),S=p("el-button-group"),W=p("el-dialog"),oe=p("el-form"),z=at("blur");return i(),B(E,null,[n(W,lt(a.$attrs,{modelValue:e(o).state.show,"onUpdate:modelValue":r[7]||(r[7]=y=>e(o).state.show=y),title:e(t)("terminal.Terminal"),class:"ba-terminal-dialog","append-to-body":!0}),{default:l(()=>[u.terminalWarning?(i(),C(V,{key:0,class:"terminal-warning-alert",title:u.terminalWarning,type:"error"},null,8,["title"])):I("",!0),e(o).state.taskList.length?(i(),C(h,{key:1},{default:l(()=>[(i(!0),B(E,null,le(e(o).state.taskList,(y,w)=>(i(),C(F,{key:w,class:D(["task-item","task-status-"+y.status]),type:k(y.status).statusType,center:"",timestamp:y.createTime,placement:"top"},{default:l(()=>[n(G,null,{default:l(()=>[_("div",null,[n(q,{type:k(y.status).statusType},{default:l(()=>[M(T(k(y.status).statusText),1)]),_:2},1032,["type"]),(y.status==e(L).Failed||y.status==e(L).Unknown)&&y.blockOnFailure?(i(),C(q,{key:0,class:"block-on-failure-tag",type:"warning"},{default:l(()=>[M(T(e(t)("terminal.Failure to execute this command will block the execution of the queue")),1)]),_:1})):I("",!0),y.status==e(L).Executing||y.status==e(L).Connecting?(i(),C(q,{key:1,class:"block-on-failure-tag",type:"danger"},{default:l(()=>[M(T(e(t)("terminal.Do not refresh the browser")),1)]),_:1})):I("",!0),_("span",Zt,T(y.command),1),_("div",Qt,[y.status==e(L).Failed||y.status==e(L).Unknown?K((i(),C(x,{key:0,title:e(t)("Retry"),size:"small",type:"warning",icon:"el-icon-RefreshRight",circle:"",onClick:ce=>e(o).retryTask(w)},null,8,["title","onClick"])),[[z]]):I("",!0),K(n(x,{onClick:ce=>e(o).delTask(w),title:e(t)("Delete"),size:"small",type:"danger",icon:"el-icon-Delete",circle:""},null,8,["onClick","title"]),[[z]])])]),y.status!=e(L).Waiting?(i(),B(E,{key:0},[y.status!=e(L).Connecting&&y.status!=e(L).Executing?(i(),B("div",{key:0,onClick:ce=>e(o).setTaskShowMessage(w),class:"toggle-message-display"},[_("span",null,T(e(t)("terminal.Command run log")),1),n(U,{name:y.showMessage?"el-icon-ArrowUp":"el-icon-ArrowDown",size:"16",color:"#909399"},null,8,["name"])],8,eo)):I("",!0),y.status==e(L).Connecting||y.status==e(L).Executing||y.status>e(L).Executing&&y.showMessage?(i(),B("div",{key:1,class:D(["exec-message","exec-message-"+y.uuid])},[(i(!0),B(E,null,le(y.message,(ce,Ye)=>(i(),B("pre",{key:Ye,class:"message-item"},T(ce),1))),128))],2)):I("",!0)],64)):I("",!0)]),_:2},1024)]),_:2},1032,["class","type","timestamp"]))),128))]),_:1})):(i(),C($,{key:2,"image-size":80,description:e(t)("terminal.No mission yet")},null,8,["description"])),n(S,null,{default:l(()=>[K((i(),C(x,{class:"terminal-menu-item",icon:"el-icon-MagicStick",onClick:r[0]||(r[0]=y=>e(o).addTaskPM("test",!1))},{default:l(()=>[M(T(e(t)("terminal.Test command")),1)]),_:1})),[[z]]),K((i(),C(x,{class:"terminal-menu-item",icon:"el-icon-Download",onClick:r[1]||(r[1]=y=>e(o).addTaskPM("web-install"))},{default:l(()=>[M(T(e(t)("terminal.Install dependent packages")),1)]),_:1})),[[z]]),K((i(),C(x,{class:"terminal-menu-item",icon:"el-icon-Sell",onClick:r[2]||(r[2]=y=>b())},{default:l(()=>[M(T(e(t)("terminal.Republish")),1)]),_:1})),[[z]]),u.menuExpand?(i(),B(E,{key:1},[K((i(),C(x,{class:"terminal-menu-item",icon:"el-icon-Delete",onClick:r[4]||(r[4]=y=>e(o).clearSuccessTask())},{default:l(()=>[M(T(e(t)("terminal.Clean up task list")),1)]),_:1})),[[z]]),K((i(),C(x,{class:"terminal-menu-item",icon:"el-icon-Switch",onClick:r[5]||(r[5]=y=>e(o).togglePackageManagerDialog(!0))},{default:l(()=>[M(T(e(t)("terminal.Package manager"))+" "+T(e(o).state.packageManager.toUpperCase()),1)]),_:1})),[[z]]),K((i(),C(x,{class:"terminal-menu-item",icon:"el-icon-Tools",onClick:r[6]||(r[6]=y=>e(o).toggleConfigDialog())},{default:l(()=>[M(T(e(t)("terminal.Terminal settings")),1)]),_:1})),[[z]])],64)):K((i(),C(x,{key:0,class:"terminal-menu-item",icon:"el-icon-Expand",onClick:r[3]||(r[3]=y=>u.menuExpand=!0)},null,512)),[[z]])]),_:1})]),_:1},16,["modelValue","title"]),n(W,{onClose:r[14]||(r[14]=y=>e(o).togglePackageManagerDialog(!1)),"model-value":e(o).state.showPackageManagerDialog,class:"ba-terminal-dialog",title:e(t)("terminal.Please select package manager"),center:""},{footer:l(()=>[_("div",oo,[n(x,{onClick:r[8]||(r[8]=y=>c("npm"))},{default:l(()=>[M("npm")]),_:1}),n(x,{onClick:r[9]||(r[9]=y=>c("cnpm"))},{default:l(()=>[M("cnpm")]),_:1}),n(x,{onClick:r[10]||(r[10]=y=>c("pnpm"))},{default:l(()=>[M("pnpm")]),_:1}),n(x,{onClick:r[11]||(r[11]=y=>c("yarn"))},{default:l(()=>[M("yarn")]),_:1}),n(x,{onClick:r[12]||(r[12]=y=>c("ni"))},{default:l(()=>[M("ni")]),_:1}),n(x,{onClick:r[13]||(r[13]=y=>c("none"))},{default:l(()=>[M(T(e(t)("terminal.I want to execute the command manually")),1)]),_:1})])]),default:l(()=>[_("div",to,T(e(t)("terminal.Switch package manager title")),1)]),_:1},8,["model-value","title"]),n(W,{onClose:r[19]||(r[19]=y=>e(o).toggleConfigDialog(!1)),"model-value":e(o).state.showConfig,class:"ba-terminal-dialog",title:e(t)("terminal.Terminal settings")},{default:l(()=>[n(oe,{"label-position":"top"},{default:l(()=>[n(ie,{label:e(t)("terminal.Install service port"),modelValue:u.port,"onUpdate:modelValue":r[15]||(r[15]=y=>u.port=y),type:"number","input-attr":{onChange:f},placeholder:e(t)("terminal.The port number to start the installation service (this port needs to be opened for external network access)")},null,8,["label","modelValue","input-attr","placeholder"]),n(ie,{label:e(t)("terminal.Installation service startup command"),modelValue:s.value,"onUpdate:modelValue":r[16]||(r[16]=y=>s.value=y),type:"string","input-attr":{disabled:!0},attr:{blockHelp:e(t)("terminal.Please execute this command to start the service (add Su under Linux)")}},null,8,["label","modelValue","attr"]),n(ie,{label:e(t)("terminal.Installation service URL"),modelValue:m.value,"onUpdate:modelValue":r[17]||(r[17]=y=>m.value=y),type:"string","input-attr":{disabled:!0},attr:{blockHelp:e(t)("terminal.Please access the site through the installation service URL (except in debug mode)")}},null,8,["label","modelValue","attr"])]),_:1}),n(ie,{label:e(t)("terminal.Clean up successful tasks when starting a new task"),"model-value":e(o).state.automaticCleanupTask,type:"radio",data:{content:{0:e(t)("Disable"),1:e(t)("Enable")},childrenAttr:{border:!0}},"input-attr":{onChange:e(o).changeAutomaticCleanupTask}},null,8,["label","model-value","data","input-attr"]),_("div",no,[n(x,{onClick:r[18]||(r[18]=y=>e(o).toggleConfigDialog(!1))},{default:l(()=>[M(T(e(t)("terminal.Back to terminal")),1)]),_:1})])]),_:1},8,["model-value","title"])],64)}}});const lo=R(ao,[["__scopeId","data-v-30ed251f"]]),so={class:"nav-menu-item"},ro=["src"],uo={class:"admin-name"},co={class:"admin-info-base"},io=["src"],mo={class:"admin-info-other"},_o={class:"admin-info-name"},po={class:"admin-info-lasttime"},fo={class:"admin-info-footer"},vo=A({__name:"navMenus",setup(g){j(v=>({"1408a152":e(u).getColorVal("headerBarBackground"),"1db40c32":e(u).getColorVal("headerBarTabColor"),"10b3a014":e(u).getColorVal("headerBarHoverBackground")}));const{t}=xe(),o=De(),u=N(),s=we(),m=O({isFullScreen:!1,currentNavMenu:"",showLayoutDrawer:!1}),f=(v,a)=>{m.currentNavMenu=v?a:""},k=()=>{if(!de.isEnabled)return rt.warning(t("layouts.Full screen is not supported")),!1;de.toggle(),de.onchange(()=>{m.isFullScreen=de.isFullscreen})},b=()=>{_e({name:"routine/adminInfo"})},c=()=>{ht().then(()=>{J.remove(he),Ee.go(0)})},d=v=>{if(v=="storage"||v=="all"){const a=J.get(he),r=J.get(Ie);if(ne.clear(),J.clear(),J.set(he,a),J.set(Ie,r),v=="storage")return}tt(v).then(()=>{})};return(v,a)=>{const r=p("Icon"),V=p("router-link"),q=p("el-dropdown-item"),x=p("el-dropdown-menu"),U=p("el-dropdown"),G=p("el-badge"),F=p("el-avatar"),h=p("el-button"),$=p("el-popover");return i(),B("div",{class:D(["nav-menus",e(u).layout.layoutMode])},[n(V,{class:"h100",target:"_blank",title:e(t)("Home"),to:"/"},{default:l(()=>[_("div",so,[n(r,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Monitor",size:"18"},null,8,["color"])])]),_:1},8,["title"]),n(U,{onVisibleChange:a[0]||(a[0]=S=>f(S,"lang")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:l(()=>[n(x,{class:"dropdown-menu-box"},{default:l(()=>[(i(!0),B(E,null,le(e(u).lang.langArray,S=>(i(),C(q,{key:S.name,onClick:W=>e(et)(S.name)},{default:l(()=>[M(T(S.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:l(()=>[_("div",{class:D(["nav-menu-item pt2",m.currentNavMenu=="lang"?"hover":""])},[n(r,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-lang",size:"18"},null,8,["color"])],2)]),_:1}),_("div",{onClick:k,class:D(["nav-menu-item",m.isFullScreen?"hover":""])},[m.isFullScreen?(i(),C(r,{key:0,color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-full-screen-cancel",size:"18"},null,8,["color"])):(i(),C(r,{key:1,color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-FullScreen",size:"18"},null,8,["color"]))],2),e(o).super?(i(),B("div",{key:0,onClick:a[1]||(a[1]=S=>e(s).toggle()),class:"nav-menu-item pt2"},[n(G,{"is-dot":e(s).state.showDot},{default:l(()=>[n(r,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-terminal",size:"26"},null,8,["color"])]),_:1},8,["is-dot"])])):I("",!0),e(o).super?(i(),C(U,{key:1,onVisibleChange:a[5]||(a[5]=S=>f(S,"clear")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:l(()=>[n(x,{class:"dropdown-menu-box"},{default:l(()=>[n(q,{onClick:a[2]||(a[2]=S=>d("tp"))},{default:l(()=>[M(T(e(t)("utils.Clean up system cache")),1)]),_:1}),n(q,{onClick:a[3]||(a[3]=S=>d("storage"))},{default:l(()=>[M(T(e(t)("utils.Clean up browser cache")),1)]),_:1}),n(q,{onClick:a[4]||(a[4]=S=>d("all")),divided:""},{default:l(()=>[M(T(e(t)("utils.Clean up all cache")),1)]),_:1})]),_:1})]),default:l(()=>[_("div",{class:D(["nav-menu-item",m.currentNavMenu=="clear"?"hover":""])},[n(r,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Delete",size:"18"},null,8,["color"])],2)]),_:1})):I("",!0),n($,{onShow:a[6]||(a[6]=S=>f(!0,"adminInfo")),onHide:a[7]||(a[7]=S=>f(!1,"adminInfo")),placement:"bottom-end","hide-after":0,width:260,trigger:"click","popper-class":"admin-info-box"},{reference:l(()=>[_("div",{class:D(["admin-info",m.currentNavMenu=="adminInfo"?"hover":""])},[n(F,{size:25,fit:"fill"},{default:l(()=>[_("img",{src:e(Ve)(e(o).avatar),alt:""},null,8,ro)]),_:1}),_("div",uo,T(e(o).nickname),1)],2)]),default:l(()=>[_("div",null,[_("div",co,[n(F,{size:70,fit:"fill"},{default:l(()=>[_("img",{src:e(Ve)(e(o).avatar),alt:""},null,8,io)]),_:1}),_("div",mo,[_("div",_o,T(e(o).nickname),1),_("div",po,T(e(o).last_login_time),1)])]),_("div",fo,[n(h,{onClick:b,type:"primary",plain:""},{default:l(()=>[M(T(e(t)("layouts.personal data")),1)]),_:1}),n(h,{onClick:c,type:"danger",plain:""},{default:l(()=>[M(T(e(t)("layouts.cancellation")),1)]),_:1})])])]),_:1}),_("div",{onClick:a[8]||(a[8]=S=>e(u).setLayout("showDrawer",!0)),class:"nav-menu-item"},[n(r,{color:e(u).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"fa fa-cogs",size:"18"},null,8,["color"])]),n(Jt),n(lo)],2)}}});const ve=R(vo,[["__scopeId","data-v-0fbb82a1"]]),go={class:"nav-bar"},yo=A({__name:"default",setup(g){j(o=>({"341e91f0":e(t).getColorVal("headerBarTabColor"),"7d0afb8a":e(t).getColorVal("headerBarTabActiveColor"),"5eccd556":e(t).getColorVal("headerBarTabActiveBackground")}));const t=N();return(o,u)=>(i(),B("div",go,[n(Xe),n(ve)]))}});const bo=R(yo,[["__scopeId","data-v-8d90b156"]]),ho={class:"nav-bar"},Co={key:0,class:"unfold"},ko=A({__name:"classic",setup(g){j(u=>({"88b2895c":e(t).getColorVal("headerBarBackground"),"6a10a632":e(t).getColorVal("headerBarTabColor"),d50d5368:e(t).getColorVal("headerBarTabActiveColor"),"4c5473d8":e(t).getColorVal("headerBarHoverBackground"),a7c0b85a:e(t).getColorVal("headerBarTabActiveBackground")}));const t=N(),o=()=>{ft("ba-aside-menu-shade",()=>{t.setLayout("menuCollapse",!0)}),t.setLayout("menuCollapse",!1)};return(u,s)=>{const m=p("Icon");return i(),B("div",ho,[e(t).layout.shrink&&e(t).layout.menuCollapse?(i(),B("div",Co,[n(m,{onClick:o,name:"fa fa-indent",color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["color"])])):I("",!0),e(t).layout.shrink?I("",!0):(i(),C(Xe,{key:1})),n(ve)])}}});const xo=R(ko,[["__scopeId","data-v-af750839"]]),wo={class:"layouts-menu-horizontal"},To={key:0,class:"menu-horizontal-logo"},So=A({__name:"menuHorizontal",setup(g){j(c=>({"229d1d8d":e(o).getColorVal("headerBarHoverBackground"),"33daf554":e(o).getColorVal("menuBackground"),"896b622e":e(o).getColorVal("menuColor"),"3f6959c3":e(o).getColorVal("menuActiveColor"),bc6b9a88:e(o).getColorVal("menuActiveBackground")}));const t=Z(),o=N(),u=P(),s=te(),m=O({menuKey:me(),defaultActive:""}),f=Q(()=>(m.menuKey=me(),u.state.tabsViewRoutes)),k=c=>{m.defaultActive=c.path},b=()=>{ee(()=>{var d;let c=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!c)return!1;(d=t.value)==null||d.setScrollTop(c.offsetTop)})};return X(()=>{k(s),b()}),ue(c=>{k(c)}),(c,d)=>{const v=p("el-menu"),a=p("el-scrollbar");return i(),B("div",wo,[e(o).layout.menuShowTopBar?(i(),B("div",To,[n(Ke)])):I("",!0),n(a,{ref_key:"horizontalMenusRef",ref:t,class:"horizontal-menus-scrollbar"},{default:l(()=>[(i(),C(v,{class:"menu-horizontal",mode:"horizontal","default-active":m.defaultActive,key:m.menuKey},{default:l(()=>[n(pe,{menus:f.value},null,8,["menus"])]),_:1},8,["default-active"]))]),_:1},512),n(ve)])}}});const Bo=R(So,[["__scopeId","data-v-6aa3158a"]]),Mo={class:"layouts-menu-horizontal-double"},$o=A({__name:"double",setup(g){j(c=>({"173d9c9f":e(o).getColorVal("menuBackground"),"62de0e00":e(o).getColorVal("menuColor"),"33a12b9a":e(o).getColorVal("menuActiveColor"),"68a22176":e(o).getColorVal("menuActiveBackground")}));const t=Z(),o=N(),u=P(),s=te(),m=O({menuKey:me(),defaultActive:""}),f=Q(()=>(m.menuKey=me(),u.state.tabsViewRoutes)),k=c=>{Be(c.path,u.state.tabsViewRoutes)&&(m.defaultActive=c.path)},b=()=>{ee(()=>{var d;let c=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!c)return!1;(d=t.value)==null||d.setScrollTop(c.offsetTop)})};return X(()=>{k(s),b()}),ue(c=>{k(c)}),(c,d)=>{const v=p("el-menu"),a=p("el-scrollbar");return i(),B("div",Mo,[n(a,{ref_key:"horizontalMenusRef",ref:t,class:"double-menus-scrollbar"},{default:l(()=>[(i(),C(v,{class:"menu-horizontal",mode:"horizontal","default-active":m.defaultActive,key:m.menuKey},{default:l(()=>[n(pe,{menus:f.value},null,8,["menus"])]),_:1},8,["default-active"]))]),_:1},512),n(ve)])}}});const Vo=R($o,[["__scopeId","data-v-df6db00e"]]),Io=A({name:"layout/header",components:{DefaultNavBar:bo,ClassicNavBar:xo,StreamlineNavBar:Bo,DoubleNavBar:Vo},__name:"header",setup(g){const t=N(),o=P();return(u,s)=>{const m=p("el-header");return e(o).state.tabFullScreen?I("",!0):(i(),C(m,{key:0,class:"layout-header"},{default:l(()=>[(i(),C(Se(e(t).layout.layoutMode+"NavBar")))]),_:1}))}}});const ge=R(Io,[["__scopeId","data-v-9014eea9"]]),Ao=A({name:"layout/main",__name:"main",setup(g){const{proxy:t}=je(),o=te(),u=N(),s=P(),m=Z(),f=O({componentKey:o.path,keepAliveComponentNameList:[]}),k=function(b){if(b){if(f.keepAliveComponentNameList.find(d=>d===b))return;f.keepAliveComponentNameList.push(b)}};return He(()=>{t.eventBus.on("onTabViewRefresh",b=>{f.keepAliveComponentNameList=f.keepAliveComponentNameList.filter(c=>b.meta.keepalive!==c),f.componentKey="",ee(()=>{f.componentKey=b.path,k(b.meta.keepalive)})}),t.eventBus.on("onTabViewClose",b=>{f.keepAliveComponentNameList=f.keepAliveComponentNameList.filter(c=>b.meta.keepalive!==c)})}),ut(()=>{t.eventBus.off("onTabViewRefresh"),t.eventBus.off("onTabViewClose")}),X(()=>{var b,c;typeof((b=s.state.activeRoute)==null?void 0:b.meta.keepalive)=="string"&&k((c=s.state.activeRoute)==null?void 0:c.meta.keepalive)}),We(()=>o.path,()=>{var b,c;f.componentKey=o.path,typeof((b=s.state.activeRoute)==null?void 0:b.meta.keepalive)=="string"&&k((c=s.state.activeRoute)==null?void 0:c.meta.keepalive)}),ct("mainScrollbarRef",m),(b,c)=>{const d=p("router-view"),v=p("el-scrollbar"),a=p("el-main");return i(),C(a,{class:"layout-main"},{default:l(()=>[n(v,{class:"layout-main-scrollbar",style:ae(e(gt)()),ref_key:"mainScrollbarRef",ref:m},{default:l(()=>[n(d,null,{default:l(({Component:r})=>[n(Te,{name:e(u).layout.mainAnimation,mode:"out-in"},{default:l(()=>[(i(),C(it,{include:f.keepAliveComponentNameList},[(i(),C(Se(r),{key:f.componentKey}))],1032,["include"]))]),_:2},1032,["name"])]),_:1})]),_:1},8,["style"])]),_:1})}}});const ye=R(Ao,[["__scopeId","data-v-9573a780"]]),Ro=g=>(qe("data-v-0aa634f1"),g=g(),Ue(),g),Fo=["title","onMouseover","onMouseout"],Lo=["onClick"],zo=Ro(()=>_("div",{class:"close-full-screen-on"},null,-1)),Do=A({__name:"closeFullScreen",setup(g){const t=P(),o=O({closeBoxTop:20});X(()=>{setTimeout(()=>{o.closeBoxTop=-30},300)});const u=()=>{o.closeBoxTop=20},s=()=>{o.closeBoxTop=-30},m=()=>{t.setFullScreen(!1)};return(f,k)=>{const b=p("Icon");return i(),B("div",{title:f.$t("layouts.Exit full screen"),onMouseover:se(u,["stop"]),onMouseout:se(s,["stop"])},[_("div",{onClick:se(m,["stop"]),class:"close-full-screen",style:ae({top:o.closeBoxTop+"px"})},[n(b,{name:"el-icon-Close"})],12,Lo),zo],40,Fo)}}});const be=R(Do,[["__scopeId","data-v-0aa634f1"]]),Eo=A({__name:"default",setup(g){const t=P();return(o,u)=>{const s=p("el-container");return i(),B(E,null,[n(s,{class:"layout-container"},{default:l(()=>[n(Me),n(s,{class:"content-wrapper"},{default:l(()=>[n(ge),n(ye)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),C(be,{key:0})):I("",!0)],64)}}});const No=R(Eo,[["__scopeId","data-v-59d252c1"]]),Po=A({__name:"classic",setup(g){const t=P();return(o,u)=>{const s=p("el-container");return i(),B(E,null,[n(s,{class:"layout-container"},{default:l(()=>[n(Me),n(s,{class:"content-wrapper"},{default:l(()=>[n(ge),n(ye)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),C(be,{key:0})):I("",!0)],64)}}});const qo=R(Po,[["__scopeId","data-v-fb349671"]]),Uo=A({__name:"streamline",setup(g){const t=P();return(o,u)=>{const s=p("el-container");return i(),B(E,null,[n(s,{class:"layout-container"},{default:l(()=>[n(s,{class:"content-wrapper"},{default:l(()=>[n(ge),n(ye)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),C(be,{key:0})):I("",!0)],64)}}});const Wo=R(Uo,[["__scopeId","data-v-fcdc1bd3"]]),Ho=A({__name:"double",setup(g){const t=P();return(o,u)=>{const s=p("el-container");return i(),B(E,null,[n(s,{class:"layout-container"},{default:l(()=>[n(Me),n(s,{class:"content-wrapper"},{default:l(()=>[n(ge),n(ye)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),C(be,{key:0})):I("",!0)],64)}}});const Oo=R(Ho,[["__scopeId","data-v-d08319bd"]]),on=A({components:{Default:No,Classic:qo,Streamline:Wo,Double:Oo},__name:"index",setup(g){const t=we(),o=P(),u=N(),s=te(),m=ze(),f=De(),k=O({autoMenuCollapseLock:!1});X(()=>{if(!f.token)return Ee.push({name:"adminLogin"});b(),ke(),Ce(window,"resize",ke)}),He(()=>{c(),Ce(window,"resize",c)});const b=()=>{Ct().then(d=>{if(m.dataFill(d.data.siteConfig),t.changePort(d.data.terminal.installServicePort),t.changePackageManager(d.data.terminal.npmPackageManager),f.dataFill(d.data.adminInfo),d.data.menus){if(vt(d.data.menus),s.params.to){const a=JSON.parse(s.params.to);if(a.path!=ot.path){let r=dt(a.query)?{}:a.query;_e({path:a.path,query:r});return}}let v=Oe(o.state.tabsViewRoutes);v&&_e(v.path)}})},c=()=>{let d={layoutMode:u.layout.layoutMode,menuCollapse:u.layout.menuCollapse},v=ne.get(re);if(v||ne.set(re,d),document.body.clientWidth<1024)k.autoMenuCollapseLock||(k.autoMenuCollapseLock=!0,u.setLayout("menuCollapse",!0)),u.setLayout("shrink",!0),u.setLayoutMode("Classic");else{k.autoMenuCollapseLock=!1;let r=v||d;u.setLayout("menuCollapse",r.menuCollapse),u.setLayout("shrink",!1),u.setLayoutMode(r.layoutMode)}};return(d,v)=>(i(),C(Se(e(u).layout.layoutMode)))}});export{on as default};
