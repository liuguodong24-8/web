var K=Object.defineProperty;var W=(t,a,c)=>a in t?K(t,a,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[a]=c;var m=(t,a,c)=>(W(t,typeof a!="symbol"?a+"":a,c),c);import{h as J,w as v,r as b,E as O,n as Y,a7 as Z,q as d,o as y,k as V,m as u,p as n,P as s,Z as j,Y as G,O as Q,V as z,U as P,z as _,a8 as X,J as ee,a1 as te,a2 as oe}from"./vue-99362bf9.js";import{_ as ae}from"./login-header-0d634706.js";import{e as ne,q as se,t as ie,v as le,g as re,r as ce,_ as de}from"./index-a6f6b7ce.js";import{l as q}from"./index-0735ee0a.js";import{b as g}from"./validate-e7ebbfab.js";import{c as ue}from"./index-0ecb7b69.js";import{t as me}from"./useDark-0e743517.js";const e={width:0,height:0,bubbleEl:null,canvas:null,ctx:{},circles:[],animate:!0,requestId:null},pe=function(){e.width=window.innerWidth,e.height=window.innerHeight,e.bubbleEl=document.getElementById("bubble"),e.bubbleEl.style.height=e.height+"px",e.canvas=document.getElementById("bubble-canvas"),e.canvas.width=e.width,e.canvas.height=e.height,e.ctx=e.canvas.getContext("2d"),e.circles=[];for(let t=0;t<e.width*.5;t++){const a=new he;e.circles.push(a)}M(),fe()};function S(){e.animate=!(document.body.scrollTop>e.height)}function B(){e.width=window.innerWidth,e.height=window.innerHeight,e.bubbleEl.style.height=e.height+"px",e.canvas.width=e.width,e.canvas.height=e.height}function M(){if(e.animate){e.ctx.clearRect(0,0,e.width,e.height);for(const t in e.circles)e.circles[t].draw()}e.requestId=requestAnimationFrame(M)}class he{constructor(){m(this,"pos");m(this,"alpha");m(this,"scale");m(this,"velocity");m(this,"draw");this.pos={x:Math.random()*e.width,y:e.height+Math.random()*100},this.alpha=.1+Math.random()*.3,this.scale=.1+Math.random()*.3,this.velocity=Math.random(),this.draw=function(){this.pos.y-=this.velocity,this.alpha-=5e-4,e.ctx.beginPath(),e.ctx.arc(this.pos.x,this.pos.y,this.scale*10,0,2*Math.PI,!1),e.ctx.fillStyle="rgba(255,255,255,"+this.alpha+")",e.ctx.fill()}}}function fe(){window.addEventListener("scroll",S),window.addEventListener("resize",B)}function _e(){window.removeEventListener("scroll",S),window.removeEventListener("resize",B),cancelAnimationFrame(e.requestId)}const R=t=>(te("data-v-c6f2f695"),t=t(),oe(),t),ge={class:"switch-language"},we={class:"login"},ve={class:"login-box"},be=R(()=>u("div",{class:"head"},[u("img",{src:ae,alt:""})],-1)),ye={class:"form"},xe={class:"content"},Ie=R(()=>u("p",{style:{color:"gray","text-align":"center"}},"©2023 涪城智学通",-1)),ke=J({__name:"login",setup(t){let a;const c=ne(),D=se();me(c.layout.isDark);const x=v(),I=v(),k=v(),p=b({showCaptcha:!1,submitLoading:!1}),i=b({username:"",password:"",keep:!1,captchaId:ie(),captchaInfo:""}),{t:h}=le(),T=b({username:[g({name:"required",message:h("login.Please enter an account")}),g({name:"account"})],password:[g({name:"required",message:h("login.Please input a password")}),g({name:"password"})]}),A=()=>{i.username===""?I.value.focus():i.password===""&&k.value.focus()};O(()=>{a=window.setTimeout(()=>{pe()},1e3),q("get").then(l=>{p.showCaptcha=l.data.captcha,Y(()=>A())}).catch(l=>{console.log(l)})}),Z(()=>{clearTimeout(a),_e()});const C=()=>{var l;(l=x.value)==null||l.validate(o=>{o&&(p.showCaptcha?ue(i.captchaId,f=>E(f)):E())})},E=(l="")=>{p.submitLoading=!0,i.captchaInfo=l,q("post",i).then(o=>{D.dataFill(o.data.userInfo),ee({message:o.msg,type:"success"}),ce.push({path:o.data.routePath})}).finally(()=>{p.submitLoading=!1})};return(l,o)=>{const f=d("Icon"),F=d("el-dropdown-item"),N=d("el-dropdown-menu"),U=d("el-dropdown"),L=d("el-input"),w=d("el-form-item"),$=d("el-button"),H=d("el-form");return y(),V("div",null,[u("div",ge,[n(U,{size:"large","hide-timeout":50,placement:"bottom-end","hide-on-click":!0},{dropdown:s(()=>[n(N,{class:"chang-lang"},{default:s(()=>[(y(!0),V(j,null,G(_(c).lang.langArray,r=>(y(),Q(F,{key:r.name,onClick:Ce=>_(re)(r.name)},{default:s(()=>[z(P(r.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:s(()=>[n(f,{name:"fa fa-globe",color:"var(--el-text-color-secondary)",size:"28"})]),_:1})]),u("div",we,[u("div",ve,[be,u("div",ye,[u("div",xe,[n(H,{onKeyup:o[3]||(o[3]=X(r=>C(),["enter"])),ref_key:"formRef",ref:x,rules:T,size:"large",model:i},{default:s(()=>[n(w,{prop:"username"},{default:s(()=>[n(L,{ref_key:"usernameRef",ref:I,type:"text",clearable:"",modelValue:i.username,"onUpdate:modelValue":o[0]||(o[0]=r=>i.username=r),placeholder:_(h)("login.Please enter an account")},{prefix:s(()=>[n(f,{name:"fa fa-user",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["modelValue","placeholder"])]),_:1}),n(w,{prop:"password"},{default:s(()=>[n(L,{ref_key:"passwordRef",ref:k,modelValue:i.password,"onUpdate:modelValue":o[1]||(o[1]=r=>i.password=r),type:"password",placeholder:_(h)("login.Please input a password"),"show-password":""},{prefix:s(()=>[n(f,{name:"fa fa-unlock-alt",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["modelValue","placeholder"])]),_:1}),n(w,null,{default:s(()=>[n($,{loading:p.submitLoading,class:"submit-button",round:"",type:"primary",size:"large",onClick:o[2]||(o[2]=r=>C())},{default:s(()=>[z(P(_(h)("login.Sign in")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["rules","model"]),Ie])])])])])}}});const Me=de(ke,[["__scopeId","data-v-c6f2f695"]]);export{Me as default};
