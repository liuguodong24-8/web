import{b as N,u as ze,S as ne,E as re,_ as R,k as P,h as Ce,F as Ge,G as Je,t as xe,L as J,H as Ze,I as we,J as L,K as $e,M as Qe,q as De,e as et,f as Ve,N as he,r as Ee,O as Ie,P as tt,v as me,j as ot}from"./index-a32a01c5.js";import{h as A,ab as j,z as e,q as p,o as i,k as B,W as I,l as ae,U as T,O as C,$ as D,Y as le,Z as E,P as l,p as n,m as _,N as te,w as Z,r as O,j as Q,E as X,ag as ue,n as ee,D as Ae,_ as K,ah as Ne,ai as Te,aj as nt,a0 as Pe,ac as se,V as M,a1 as qe,a2 as Ue,F as We,X as at,ak as lt,al as st,am as rt,an as Se,ao as He,ae as ut,ap as ct,aq as it,i as dt}from"./vue-9888607f.js";import{_ as mt}from"./logo-b67ce0cf.js";import{c as _t,o as Re,g as Oe,r as _e,s as pt,a as ft}from"./router-402b9d32.js";import{s as ke,m as vt}from"./layout-05f5fbc5.js";import{I as gt}from"./index-cfb50cde.js";import{D as yt,t as bt}from"./darkSwitch-5c58b523.js";import{a as ht,i as Ct}from"./index-77e77f07.js";import{F as ie}from"./index-7c3dd670.js";import"./index-280d7cc1.js";const kt={class:"layout-logo"},xt={key:0,class:"logo-img",src:mt,alt:"logo"},wt=A({__name:"logo",setup(v){j(c=>({adf9ae48:e(t).layout.layoutMode!="Streamline"?e(t).getColorVal("menuTopBarBackground"):"transparent"}));const t=N(),o=ze(),r=function(){t.layout.shrink&&!t.layout.menuCollapse&&_t(),t.setLayout("menuCollapse",!t.layout.menuCollapse),ne.set(re,{layoutMode:t.layout.layoutMode,menuCollapse:t.layout.menuCollapse}),setTimeout(()=>{ke()},350)};return(c,d)=>{const f=p("Icon");return i(),B("div",kt,[e(t).layout.menuCollapse?I("",!0):(i(),B("img",xt)),e(t).layout.menuCollapse?I("",!0):(i(),B("div",{key:1,style:ae({color:e(t).getColorVal("menuActiveColor")}),class:"website-name"},T(e(o).siteName),5)),e(t).layout.layoutMode!="Streamline"?(i(),C(f,{key:2,onClick:r,name:e(t).layout.menuCollapse?"fa fa-indent":"fa fa-dedent",class:D([e(t).layout.menuCollapse?"unfold":"","fold"]),color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["name","class","color"])):I("",!0)])}}});const Ke=R(wt,[["__scopeId","data-v-38fd2478"]]),Tt=A({__name:"menuTree",props:{menus:{default:()=>[]}},setup(v){j(c=>({20955865:e(t).getColorVal("menuActiveBackground")}));const t=N(),o=v,r=c=>{var d;["Streamline","Double"].includes(t.layout.layoutMode)&&((d=c.children)!=null&&d.length)&&Re(c.children[0])};return(c,d)=>{const f=p("Icon"),w=p("menu-tree",!0),h=p("el-sub-menu"),u=p("el-menu-item");return i(!0),B(E,null,le(o.menus,m=>(i(),B(E,null,[m.children&&m.children.length>0?(i(),C(h,{onClick:g=>r(m),index:m.path,key:m.path},{title:l(()=>{var g,a,s,V;return[n(f,{color:e(t).getColorVal("menuColor"),name:(g=m.meta)!=null&&g.icon?(a=m.meta)==null?void 0:a.icon:e(t).layout.menuDefaultIcon},null,8,["color","name"]),_("span",null,T((s=m.meta)!=null&&s.title?(V=m.meta)==null?void 0:V.title:c.$t("noTitle")),1)]}),default:l(()=>[n(w,{menus:m.children},null,8,["menus"])]),_:2},1032,["onClick","index"])):(i(),C(u,{index:m.path,key:m.path,onClick:g=>e(Re)(m)},{default:l(()=>{var g,a,s,V;return[n(f,{color:e(t).getColorVal("menuColor"),name:(g=m.meta)!=null&&g.icon?(a=m.meta)==null?void 0:a.icon:e(t).layout.menuDefaultIcon},null,8,["color","name"]),_("span",null,T((s=m.meta)!=null&&s.title?(V=m.meta)==null?void 0:V.title:c.$t("noTitle")),1)]}),_:2},1032,["index","onClick"]))],64))),256)}}});const pe=R(Tt,[["__scopeId","data-v-f95e303f"]]),St=A({__name:"menuVertical",setup(v){j(u=>({"4ac75b46":f.value,fc15b866:e(t).getColorVal("menuBackground"),"5a437bdc":e(t).getColorVal("menuColor"),"1fda8a2c":e(t).getColorVal("menuActiveColor")}));const t=N(),o=P(),r=te(),c=Z(),d=O({defaultActive:""}),f=Q(()=>{let u=0;return t.layout.menuShowTopBar&&(u=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+u)+"px)":"calc(100vh - "+u+"px)"}),w=u=>{d.defaultActive=u.path},h=()=>{ee(()=>{var m;let u=document.querySelector(".el-menu.layouts-menu-vertical li.is-active");if(!u)return!1;(m=c.value)==null||m.setScrollTop(u.offsetTop)})};return X(()=>{w(r),h()}),ue(u=>{w(u)}),(u,m)=>{const g=p("el-menu"),a=p("el-scrollbar");return i(),C(a,{ref_key:"verticalMenusRef",ref:c,class:"vertical-menus-scrollbar"},{default:l(()=>[n(g,{class:"layouts-menu-vertical","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":d.defaultActive,collapse:e(t).layout.menuCollapse},{default:l(()=>[n(pe,{menus:e(o).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}});const Be=(v,t)=>{for(let o=0;o<t.length;o++){const r=t[o];if(r.path==v||r.children&&r.children.length>0&&Be(v,r.children))return r}return!1},Bt=A({__name:"menuVerticalChildren",setup(v){j(u=>({"676a4508":f.value,"5173dffa":e(t).getColorVal("menuBackground"),"79ac0c1c":e(t).getColorVal("menuColor"),"74a724b6":e(t).getColorVal("menuActiveColor")}));const t=N(),o=P(),r=te(),c=Z(),d=O({defaultActive:"",routeChildren:[]}),f=Q(()=>{let u=0;return t.layout.menuShowTopBar&&(u=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+u)+"px)":"calc(100vh - "+u+"px)"}),w=u=>{let m=Be(u.path,o.state.tabsViewRoutes);m?(d.defaultActive=u.path,m.children&&m.children.length>0?d.routeChildren=m.children:d.routeChildren=[m]):d.routeChildren||(d.routeChildren=o.state.tabsViewRoutes)},h=()=>{ee(()=>{var m;let u=document.querySelector(".el-menu.layouts-menu-vertical-children li.is-active");if(!u)return!1;(m=c.value)==null||m.setScrollTop(u.offsetTop)})};return X(()=>{w(r),h()}),ue(u=>{w(u)}),(u,m)=>{const g=p("el-menu"),a=p("el-scrollbar");return i(),C(a,{ref_key:"verticalMenusRef",ref:c,class:"children-vertical-menus-scrollbar"},{default:l(()=>[n(g,{class:"layouts-menu-vertical-children","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":d.defaultActive,collapse:e(t).layout.menuCollapse},{default:l(()=>[d.routeChildren.length>0?(i(),C(pe,{key:0,menus:d.routeChildren},null,8,["menus"])):I("",!0)]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}});const Mt=A({name:"layout/aside",__name:"aside",setup(v){j(c=>({"12d2a223":r.value}));const t=N(),o=P(),r=Q(()=>t.menuWidth());return(c,d)=>{const f=p("el-aside");return e(o).state.tabFullScreen?I("",!0):(i(),C(f,{key:0,class:D("layout-aside-"+e(t).layout.layoutMode+" "+(e(t).layout.shrink?"shrink":""))},{default:l(()=>[e(t).layout.menuShowTopBar?(i(),C(Ke,{key:0})):I("",!0),e(t).layout.layoutMode=="Double"?(i(),C(Bt,{key:1})):(i(),C(St,{key:2}))]),_:1},8,["class"]))}}});const Me=R(Mt,[["__scopeId","data-v-be977e32"]]);function je(){if(!Ae())throw new Error("useCurrentInstance() can only be used inside setup() or functional components!");const{appContext:v}=Ae();return{proxy:v.config.globalProperties}}const $t={class:"el-dropdown-menu"},Vt=["onClick"],It=A({__name:"index",props:{width:{default:150},items:{default:()=>[]}},emits:["contextmenuItemClick"],setup(v,{expose:t,emit:o}){const r=v,c=o,d=O({show:!1,axis:{x:0,y:0},menu:void 0,arrowAxis:10}),f=(u,m)=>{d.menu=u,d.axis=m,d.show=!0},w=u=>{u.disabled||(u.menu=nt(d.menu),c("contextmenuItemClick",u))},h=()=>{d.show=!1};return t({onShowContextmenu:f,onHideContextmenu:h}),X(()=>{Ce(document,"click",h)}),(u,m)=>{const g=p("Icon");return i(),C(Te,{name:"el-zoom-in-center"},{default:l(()=>[K((i(),B("div",{class:"el-popper is-pure is-light el-dropdown__popper ba-contextmenu",style:ae(`top: ${d.axis.y+5}px;left: ${d.axis.x-14}px;width:${r.width}px`),key:Math.random(),"aria-hidden":"false","data-popper-placement":"bottom"},[_("ul",$t,[(i(!0),B(E,null,le(r.items,(a,s)=>(i(),B("li",{key:s,class:D(["el-dropdown-menu__item",a.disabled?"is-disabled":""]),tabindex:"-1",onClick:V=>w(a)},[n(g,{size:"12",name:a.icon},null,8,["name"]),_("span",null,T(a.label),1)],10,Vt))),128))]),_("span",{class:"el-popper__arrow",style:ae({left:`${d.arrowAxis}px`})},null,4)],4)),[[Ne,d.show]])]),_:1})}}});const At=R(It,[["__scopeId","data-v-b68cb97f"]]),Rt=["onClick","onContextmenu"],Ft=A({__name:"tabs",setup(v){j(b=>({"2345f147":e(r).getColorVal("headerBarTabColor"),c5a584be:e(r).getColorVal("headerBarTabActiveColor"),"683c7ffc":e(r).layout.layoutMode=="Default"?"none":e(r).getColorVal("headerBarBackground")}));const t=te(),o=Pe(),r=N(),c=P(),{proxy:d}=je(),f=Z(),w=Ge(),h=Z(),u=O({contextmenuItems:[{name:"refresh",label:"重新加载",icon:"fa fa-refresh"},{name:"close",label:"关闭标签",icon:"fa fa-times"},{name:"fullScreen",label:"当前标签全屏",icon:"el-icon-FullScreen"},{name:"closeOther",label:"关闭其他标签",icon:"fa fa-minus"},{name:"closeAll",label:"关闭全部标签",icon:"fa fa-stop"}]}),m=O({width:"0",transform:"translateX(0px)"}),g=b=>{o.push(b)},a=(b,$)=>{u.contextmenuItems[0].disabled=t.path!==b.path,u.contextmenuItems[4].disabled=u.contextmenuItems[3].disabled=c.state.tabsView.length==1;const{clientX:S,clientY:W}=$;h.value.onShowContextmenu(b,{x:S,y:W})},s=function(b){if(!b)return!1;m.width=b.clientWidth+"px",m.transform=`translateX(${b.offsetLeft}px)`;let $=b.offsetLeft+b.clientWidth-f.value.clientWidth;b.offsetLeft<f.value.scrollLeft?f.value.scrollTo(b.offsetLeft,0):$>f.value.scrollLeft&&f.value.scrollTo($,0)},V=()=>{const b=c.state.tabsView.slice(-1)[0];b?o.push(b):o.push("/admin")},q=b=>{var $;c.closeTab(b),d.eventBus.emit("onTabViewClose",b),(($=c.state.activeRoute)==null?void 0:$.path)===b.path?V():(c.setActiveRoute(c.state.activeRoute),ee(()=>{s(w.value[c.state.activeIndex])})),h.value.onHideContextmenu()},k=b=>{var $;c.closeTabs(b),c.setActiveRoute(b),(($=c.state.activeRoute)==null?void 0:$.path)!==t.path&&o.push(b.path)},U=b=>{var S;let $=Oe(c.state.tabsViewRoutes);if($&&$.path==b.path)return k(b);if($&&$.path==((S=c.state.activeRoute)==null?void 0:S.path))return k(c.state.activeRoute);c.closeTabs(!1),$&&_e($.path)},G=async b=>{const{name:$,menu:S}=b;if(S)switch($){case"refresh":d.eventBus.emit("onTabViewRefresh",S);break;case"close":q(S);break;case"closeOther":k(S);break;case"closeAll":U(S);break;case"fullScreen":t.path!==(S==null?void 0:S.path)&&o.push(S==null?void 0:S.path),c.setFullScreen(!0);break}},F=function(b){c.addTab(b),c.setActiveRoute(b),ee(()=>{s(w.value[c.state.activeIndex])})};return ue(async b=>{F(b)}),X(()=>{F(o.currentRoute.value),new Je(f.value)}),(b,$)=>{const S=p("Icon");return i(),B(E,null,[_("div",{class:"nav-tabs",ref_key:"tabScrollbarRef",ref:f},[(i(!0),B(E,null,le(e(c).state.tabsView,(W,oe)=>(i(),B("div",{onClick:z=>g(W),onContextmenu:se(z=>a(W,z),["prevent"]),class:D(["ba-nav-tab",e(c).state.activeIndex==oe?"active":""]),ref_for:!0,ref:e(w).set,key:oe},[M(T(W.meta.title)+" ",1),n(Te,{onAfterLeave:$[0]||($[0]=z=>s(e(w)[e(c).state.activeIndex])),name:"el-fade-in"},{default:l(()=>[K(n(S,{class:"close-icon",onClick:se(z=>q(W),["stop"]),size:"15",name:"el-icon-Close"},null,8,["onClick"]),[[Ne,e(c).state.tabsView.length>1]])]),_:2},1024)],42,Rt))),128)),_("div",{style:ae(m),class:"nav-tabs-active-box"},null,4)],512),n(At,{ref_key:"contextmenuRef",ref:h,items:u.contextmenuItems,onContextmenuItemClick:G},null,8,["items"])],64)}}});const Xe=R(Ft,[["__scopeId","data-v-4a289cba"]]),Fe=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Y=(()=>{if(typeof document>"u")return!1;const v=Fe[0],t={};for(const o of Fe)if((o==null?void 0:o[1])in document){for(const[c,d]of o.entries())t[v[c]]=d;return t}return!1})(),Le={change:Y.fullscreenchange,error:Y.fullscreenerror};let H={request(v=document.documentElement,t){return new Promise((o,r)=>{const c=()=>{H.off("change",c),o()};H.on("change",c);const d=v[Y.requestFullscreen](t);d instanceof Promise&&d.then(c).catch(r)})},exit(){return new Promise((v,t)=>{if(!H.isFullscreen){v();return}const o=()=>{H.off("change",o),v()};H.on("change",o);const r=document[Y.exitFullscreen]();r instanceof Promise&&r.then(o).catch(t)})},toggle(v,t){return H.isFullscreen?H.exit():H.request(v,t)},onchange(v){H.on("change",v)},onerror(v){H.on("error",v)},on(v,t){const o=Le[v];o&&document.addEventListener(o,t,!1)},off(v,t){const o=Le[v];o&&document.removeEventListener(o,t,!1)},raw:Y};Object.defineProperties(H,{isFullscreen:{get:()=>!!document[Y.fullscreenElement]},element:{enumerable:!0,get:()=>document[Y.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[Y.fullscreenEnabled]}});Y||(H={isEnabled:!1});const de=H,fe=v=>(qe("data-v-bac0a267"),v=v(),Ue(),v),Lt={class:"layout-config-drawer"},zt={class:"layout-mode-styles-box"},Dt={class:"layout-mode-box-style"},Et=fe(()=>_("div",{class:"layout-mode-style-box"},[_("div",{class:"layout-mode-style-aside"}),_("div",{class:"layout-mode-style-container-box"},[_("div",{class:"layout-mode-style-header"}),_("div",{class:"layout-mode-style-container"})])],-1)),Nt={class:"layout-mode-style-name"},Pt=fe(()=>_("div",{class:"layout-mode-style-box"},[_("div",{class:"layout-mode-style-aside"}),_("div",{class:"layout-mode-style-container-box"},[_("div",{class:"layout-mode-style-header"}),_("div",{class:"layout-mode-style-container"})])],-1)),qt={class:"layout-mode-style-name"},Ut=fe(()=>_("div",{class:"layout-mode-style-box"},[_("div",{class:"layout-mode-style-container-box"},[_("div",{class:"layout-mode-style-header"}),_("div",{class:"layout-mode-style-container"})])],-1)),Wt={class:"layout-mode-style-name"},Ht=fe(()=>_("div",{class:"layout-mode-style-box"},[_("div",{class:"layout-mode-style-aside"}),_("div",{class:"layout-mode-style-container-box"},[_("div",{class:"layout-mode-style-header"}),_("div",{class:"layout-mode-style-container"})])],-1)),Ot={class:"layout-mode-style-name"},Kt={class:"layout-config-global"},jt={class:"layout-config-aside"},Xt={class:"layout-config-aside"},Yt={class:"ba-center"},Gt=A({__name:"config",setup(v){const{t}=xe(),o=N(),r=P(),c=Pe(),d=(g,a)=>{o.setLayout(a,g)},f=(g,a)=>{if(g===null)return;const s=o.layout[a];o.layout.isDark?s[1]=g:s[0]=g,o.setLayout(a,s)},w=g=>{ne.set(re,{layoutMode:g,menuCollapse:o.layout.menuCollapse}),o.setLayoutMode(g)},h=(g,a)=>{o.setLayout(a,g);const s=r.state.tabsViewRoutes;r.setTabsViewRoutes([]),setTimeout(()=>{r.setTabsViewRoutes(s)},200)},u=()=>{o.setLayout("showDrawer",!1)},m=()=>{J.remove(Ze),ne.remove(re),c.go(0)};return(g,a)=>{const s=p("el-divider"),V=p("el-col"),q=p("el-row"),k=p("el-form-item"),U=p("el-option"),G=p("el-select"),F=p("el-color-picker"),b=p("el-switch"),$=p("el-input"),S=p("el-button"),W=p("el-popconfirm"),oe=p("el-form"),z=p("el-scrollbar"),y=p("el-drawer");return i(),B("div",Lt,[n(y,{"model-value":e(o).layout.showDrawer,title:e(t)("layouts.Layout configuration"),size:"310px",onClose:u},{default:l(()=>[n(z,{class:"layout-mode-style-scrollbar"},{default:l(()=>[n(oe,{ref:"formRef",model:e(o).layout},{default:l(()=>[_("div",zt,[n(s,{"border-style":"dashed"},{default:l(()=>[M(T(e(t)("layouts.Layout mode")),1)]),_:1}),_("div",Dt,[n(q,{class:"layout-mode-box-style-row",gutter:10},{default:l(()=>[n(V,{span:12},{default:l(()=>[_("div",{onClick:a[0]||(a[0]=x=>w("Default")),class:D(["layout-mode-style default",e(o).layout.layoutMode=="Default"?"active":""])},[Et,_("div",Nt,T(e(t)("layouts.default")),1)],2)]),_:1}),n(V,{span:12},{default:l(()=>[_("div",{onClick:a[1]||(a[1]=x=>w("Classic")),class:D(["layout-mode-style classic",e(o).layout.layoutMode=="Classic"?"active":""])},[Pt,_("div",qt,T(e(t)("layouts.classic")),1)],2)]),_:1})]),_:1}),n(q,{gutter:10},{default:l(()=>[n(V,{span:12},{default:l(()=>[_("div",{onClick:a[2]||(a[2]=x=>w("Streamline")),class:D(["layout-mode-style streamline",e(o).layout.layoutMode=="Streamline"?"active":""])},[Ut,_("div",Wt,T(e(t)("layouts.Single column")),1)],2)]),_:1}),n(V,{span:12},{default:l(()=>[_("div",{onClick:a[3]||(a[3]=x=>w("Double")),class:D(["layout-mode-style double",e(o).layout.layoutMode=="Double"?"active":""])},[Ht,_("div",Ot,T(e(t)("layouts.Double column")),1)],2)]),_:1})]),_:1})]),n(s,{"border-style":"dashed"},{default:l(()=>[M(T(e(t)("layouts.overall situation")),1)]),_:1}),_("div",Kt,[n(k,{size:"large",label:e(t)("layouts.Dark mode")},{default:l(()=>[n(yt,{onClick:a[4]||(a[4]=x=>e(bt)())})]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Background page switching animation")},{default:l(()=>[n(G,{onChange:a[5]||(a[5]=x=>d(x,"mainAnimation")),"model-value":e(o).layout.mainAnimation,placeholder:e(t)("layouts.Please select an animation name")},{default:l(()=>[n(U,{label:"slide-right",value:"slide-right"}),n(U,{label:"slide-left",value:"slide-left"}),n(U,{label:"el-fade-in-linear",value:"el-fade-in-linear"}),n(U,{label:"el-fade-in",value:"el-fade-in"}),n(U,{label:"el-zoom-in-center",value:"el-zoom-in-center"}),n(U,{label:"el-zoom-in-top",value:"el-zoom-in-top"}),n(U,{label:"el-zoom-in-bottom",value:"el-zoom-in-bottom"})]),_:1},8,["model-value","placeholder"])]),_:1},8,["label"])]),n(s,{"border-style":"dashed"},{default:l(()=>[M(T(e(t)("layouts.sidebar")),1)]),_:1}),_("div",jt,[n(k,{label:e(t)("layouts.Side menu bar background color")},{default:l(()=>[n(F,{onChange:a[6]||(a[6]=x=>f(x,"menuBackground")),"model-value":e(o).getColorVal("menuBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu text color")},{default:l(()=>[n(F,{onChange:a[7]||(a[7]=x=>f(x,"menuColor")),"model-value":e(o).getColorVal("menuColor")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu active item background color")},{default:l(()=>[n(F,{onChange:a[8]||(a[8]=x=>f(x,"menuActiveBackground")),"model-value":e(o).getColorVal("menuActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu active item text color")},{default:l(()=>[n(F,{onChange:a[9]||(a[9]=x=>f(x,"menuActiveColor")),"model-value":e(o).getColorVal("menuActiveColor")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Show side menu top bar (logo bar)")},{default:l(()=>[n(b,{onChange:a[10]||(a[10]=x=>d(x,"menuShowTopBar")),"model-value":e(o).layout.menuShowTopBar},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu top bar background color")},{default:l(()=>[n(F,{onChange:a[11]||(a[11]=x=>f(x,"menuTopBarBackground")),"model-value":e(o).getColorVal("menuTopBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu width (when expanded)")},{default:l(()=>[n($,{onInput:a[12]||(a[12]=x=>d(x,"menuWidth")),type:"number",step:10,"model-value":e(o).layout.menuWidth},{append:l(()=>[M("px")]),_:1},8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu default icon")},{default:l(()=>[n(gt,{onChange:a[13]||(a[13]=x=>h(x,"menuDefaultIcon")),"model-value":e(o).layout.menuDefaultIcon},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu horizontal collapse")},{default:l(()=>[n(b,{onChange:a[14]||(a[14]=x=>d(x,"menuCollapse")),"model-value":e(o).layout.menuCollapse},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu accordion")},{default:l(()=>[n(b,{onChange:a[15]||(a[15]=x=>d(x,"menuUniqueOpened")),"model-value":e(o).layout.menuUniqueOpened},null,8,["model-value"])]),_:1},8,["label"])]),n(s,{"border-style":"dashed"},{default:l(()=>[M(T(e(t)("layouts.Top bar")),1)]),_:1}),_("div",Xt,[n(k,{label:e(t)("layouts.Top bar background color")},{default:l(()=>[n(F,{onChange:a[16]||(a[16]=x=>f(x,"headerBarBackground")),"model-value":e(o).getColorVal("headerBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Top bar text color")},{default:l(()=>[n(F,{onChange:a[17]||(a[17]=x=>f(x,"headerBarTabColor")),"model-value":e(o).getColorVal("headerBarTabColor")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Background color when hovering over the top bar")},{default:l(()=>[n(F,{onChange:a[18]||(a[18]=x=>f(x,"headerBarHoverBackground")),"model-value":e(o).getColorVal("headerBarHoverBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Top bar menu active item background color")},{default:l(()=>[n(F,{onChange:a[19]||(a[19]=x=>f(x,"headerBarTabActiveBackground")),"model-value":e(o).getColorVal("headerBarTabActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Top bar menu active item text color")},{default:l(()=>[n(F,{onChange:a[20]||(a[20]=x=>f(x,"headerBarTabActiveColor")),"model-value":e(o).getColorVal("headerBarTabActiveColor")},null,8,["model-value"])]),_:1},8,["label"])]),n(W,{onConfirm:m,title:e(t)("layouts.Are you sure you want to restore all configurations to the default values?")},{reference:l(()=>[_("div",Yt,[n(S,{class:"w80",type:"info"},{default:l(()=>[M(T(e(t)("layouts.Restore default")),1)]),_:1})])]),_:1},8,["title"])])]),_:1},8,["model"])]),_:1})]),_:1},8,["model-value","title"])])}}});const Jt=R(Gt,[["__scopeId","data-v-bac0a267"]]),Zt={class:"command"},Qt={class:"task-opt"},eo=["onClick"],to={class:"indent-2"},oo={class:"package-manager-dialog-footer"},no={class:"config-buttons"},ao=A({__name:"index",setup(v){const{t}=xe(),o=we(),r=O({terminalWarning:"",port:o.state.port,menuExpand:document.documentElement.clientWidth>1840}),c=Q(()=>{let a=o.state.port==""?"80":o.state.port;return a=="8000"?"php think run":"php think run -p "+a}),d=Q(()=>{let a=o.state.port==""?"":":"+o.state.port;return"http://localhost"+a+" "+t("terminal.or")+" http://"+t("terminal.Site domain name")+a}),f=a=>{$e({port:a}).then(s=>{s.code==1?(o.changePort(a),g()):r.port=o.state.port}).catch(()=>{r.port=o.state.port})},w=a=>{let s=t("terminal.unknown"),V="info";switch(a){case L.Waiting:s=t("terminal.Waiting for execution"),V="info";break;case L.Connecting:s=t("terminal.Connecting"),V="warning";break;case L.Executing:s=t("terminal.Executing"),V="warning";break;case L.Success:s=t("terminal.Successful execution"),V="success";break;case L.Failed:s=t("terminal.Execution failed"),V="danger";break;case L.Unknown:s=t("terminal.Unknown execution result"),V="danger";break}return{statusText:s,statusType:V}},h=()=>{st.confirm(t("terminal.Are you sure you want to republish?"),t("Reminder"),{confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),type:"warning"}).then(()=>{o.addTaskPM("web-build")})},u=a=>{$e({manager:a}).then(s=>{s.code==1&&o.changePackageManager(a)}),o.togglePackageManagerDialog(!1)},m=a=>{r.terminalWarning=a},g=()=>{Qe()!=o.state.port?m(t("terminal.The current terminal is not running under the installation service, and some commands may not be executed")):m("")};return We(()=>o.state.port,a=>{a!=r.port&&(r.port=a,g())}),X(()=>{g()}),(a,s)=>{const V=p("el-alert"),q=p("el-tag"),k=p("el-button"),U=p("Icon"),G=p("el-card"),F=p("el-timeline-item"),b=p("el-timeline"),$=p("el-empty"),S=p("el-button-group"),W=p("el-dialog"),oe=p("el-form"),z=at("blur");return i(),B(E,null,[n(W,lt(a.$attrs,{modelValue:e(o).state.show,"onUpdate:modelValue":s[7]||(s[7]=y=>e(o).state.show=y),title:e(t)("terminal.Terminal"),class:"ba-terminal-dialog","append-to-body":!0}),{default:l(()=>[r.terminalWarning?(i(),C(V,{key:0,class:"terminal-warning-alert",title:r.terminalWarning,type:"error"},null,8,["title"])):I("",!0),e(o).state.taskList.length?(i(),C(b,{key:1},{default:l(()=>[(i(!0),B(E,null,le(e(o).state.taskList,(y,x)=>(i(),C(F,{key:x,class:D(["task-item","task-status-"+y.status]),type:w(y.status).statusType,center:"",timestamp:y.createTime,placement:"top"},{default:l(()=>[n(G,null,{default:l(()=>[_("div",null,[n(q,{type:w(y.status).statusType},{default:l(()=>[M(T(w(y.status).statusText),1)]),_:2},1032,["type"]),(y.status==e(L).Failed||y.status==e(L).Unknown)&&y.blockOnFailure?(i(),C(q,{key:0,class:"block-on-failure-tag",type:"warning"},{default:l(()=>[M(T(e(t)("terminal.Failure to execute this command will block the execution of the queue")),1)]),_:1})):I("",!0),y.status==e(L).Executing||y.status==e(L).Connecting?(i(),C(q,{key:1,class:"block-on-failure-tag",type:"danger"},{default:l(()=>[M(T(e(t)("terminal.Do not refresh the browser")),1)]),_:1})):I("",!0),_("span",Zt,T(y.command),1),_("div",Qt,[y.status==e(L).Failed||y.status==e(L).Unknown?K((i(),C(k,{key:0,title:e(t)("Retry"),size:"small",type:"warning",icon:"el-icon-RefreshRight",circle:"",onClick:ce=>e(o).retryTask(x)},null,8,["title","onClick"])),[[z]]):I("",!0),K(n(k,{onClick:ce=>e(o).delTask(x),title:e(t)("Delete"),size:"small",type:"danger",icon:"el-icon-Delete",circle:""},null,8,["onClick","title"]),[[z]])])]),y.status!=e(L).Waiting?(i(),B(E,{key:0},[y.status!=e(L).Connecting&&y.status!=e(L).Executing?(i(),B("div",{key:0,onClick:ce=>e(o).setTaskShowMessage(x),class:"toggle-message-display"},[_("span",null,T(e(t)("terminal.Command run log")),1),n(U,{name:y.showMessage?"el-icon-ArrowUp":"el-icon-ArrowDown",size:"16",color:"#909399"},null,8,["name"])],8,eo)):I("",!0),y.status==e(L).Connecting||y.status==e(L).Executing||y.status>e(L).Executing&&y.showMessage?(i(),B("div",{key:1,class:D(["exec-message","exec-message-"+y.uuid])},[(i(!0),B(E,null,le(y.message,(ce,Ye)=>(i(),B("pre",{key:Ye,class:"message-item"},T(ce),1))),128))],2)):I("",!0)],64)):I("",!0)]),_:2},1024)]),_:2},1032,["class","type","timestamp"]))),128))]),_:1})):(i(),C($,{key:2,"image-size":80,description:e(t)("terminal.No mission yet")},null,8,["description"])),n(S,null,{default:l(()=>[K((i(),C(k,{class:"terminal-menu-item",icon:"el-icon-MagicStick",onClick:s[0]||(s[0]=y=>e(o).addTaskPM("test",!1))},{default:l(()=>[M(T(e(t)("terminal.Test command")),1)]),_:1})),[[z]]),K((i(),C(k,{class:"terminal-menu-item",icon:"el-icon-Download",onClick:s[1]||(s[1]=y=>e(o).addTaskPM("web-install"))},{default:l(()=>[M(T(e(t)("terminal.Install dependent packages")),1)]),_:1})),[[z]]),K((i(),C(k,{class:"terminal-menu-item",icon:"el-icon-Sell",onClick:s[2]||(s[2]=y=>h())},{default:l(()=>[M(T(e(t)("terminal.Republish")),1)]),_:1})),[[z]]),r.menuExpand?(i(),B(E,{key:1},[K((i(),C(k,{class:"terminal-menu-item",icon:"el-icon-Delete",onClick:s[4]||(s[4]=y=>e(o).clearSuccessTask())},{default:l(()=>[M(T(e(t)("terminal.Clean up task list")),1)]),_:1})),[[z]]),K((i(),C(k,{class:"terminal-menu-item",icon:"el-icon-Switch",onClick:s[5]||(s[5]=y=>e(o).togglePackageManagerDialog(!0))},{default:l(()=>[M(T(e(t)("terminal.Package manager"))+" "+T(e(o).state.packageManager.toUpperCase()),1)]),_:1})),[[z]]),K((i(),C(k,{class:"terminal-menu-item",icon:"el-icon-Tools",onClick:s[6]||(s[6]=y=>e(o).toggleConfigDialog())},{default:l(()=>[M(T(e(t)("terminal.Terminal settings")),1)]),_:1})),[[z]])],64)):K((i(),C(k,{key:0,class:"terminal-menu-item",icon:"el-icon-Expand",onClick:s[3]||(s[3]=y=>r.menuExpand=!0)},null,512)),[[z]])]),_:1})]),_:1},16,["modelValue","title"]),n(W,{onClose:s[14]||(s[14]=y=>e(o).togglePackageManagerDialog(!1)),"model-value":e(o).state.showPackageManagerDialog,class:"ba-terminal-dialog",title:e(t)("terminal.Please select package manager"),center:""},{footer:l(()=>[_("div",oo,[n(k,{onClick:s[8]||(s[8]=y=>u("npm"))},{default:l(()=>[M("npm")]),_:1}),n(k,{onClick:s[9]||(s[9]=y=>u("cnpm"))},{default:l(()=>[M("cnpm")]),_:1}),n(k,{onClick:s[10]||(s[10]=y=>u("pnpm"))},{default:l(()=>[M("pnpm")]),_:1}),n(k,{onClick:s[11]||(s[11]=y=>u("yarn"))},{default:l(()=>[M("yarn")]),_:1}),n(k,{onClick:s[12]||(s[12]=y=>u("ni"))},{default:l(()=>[M("ni")]),_:1}),n(k,{onClick:s[13]||(s[13]=y=>u("none"))},{default:l(()=>[M(T(e(t)("terminal.I want to execute the command manually")),1)]),_:1})])]),default:l(()=>[_("div",to,T(e(t)("terminal.Switch package manager title")),1)]),_:1},8,["model-value","title"]),n(W,{onClose:s[19]||(s[19]=y=>e(o).toggleConfigDialog(!1)),"model-value":e(o).state.showConfig,class:"ba-terminal-dialog",title:e(t)("terminal.Terminal settings")},{default:l(()=>[n(oe,{"label-position":"top"},{default:l(()=>[n(ie,{label:e(t)("terminal.Install service port"),modelValue:r.port,"onUpdate:modelValue":s[15]||(s[15]=y=>r.port=y),type:"number","input-attr":{onChange:f},placeholder:e(t)("terminal.The port number to start the installation service (this port needs to be opened for external network access)")},null,8,["label","modelValue","input-attr","placeholder"]),n(ie,{label:e(t)("terminal.Installation service startup command"),modelValue:c.value,"onUpdate:modelValue":s[16]||(s[16]=y=>c.value=y),type:"string","input-attr":{disabled:!0},attr:{blockHelp:e(t)("terminal.Please execute this command to start the service (add Su under Linux)")}},null,8,["label","modelValue","attr"]),n(ie,{label:e(t)("terminal.Installation service URL"),modelValue:d.value,"onUpdate:modelValue":s[17]||(s[17]=y=>d.value=y),type:"string","input-attr":{disabled:!0},attr:{blockHelp:e(t)("terminal.Please access the site through the installation service URL (except in debug mode)")}},null,8,["label","modelValue","attr"])]),_:1}),n(ie,{label:e(t)("terminal.Clean up successful tasks when starting a new task"),"model-value":e(o).state.automaticCleanupTask,type:"radio",data:{content:{0:e(t)("Disable"),1:e(t)("Enable")},childrenAttr:{border:!0}},"input-attr":{onChange:e(o).changeAutomaticCleanupTask}},null,8,["label","model-value","data","input-attr"]),_("div",no,[n(k,{onClick:s[18]||(s[18]=y=>e(o).toggleConfigDialog(!1))},{default:l(()=>[M(T(e(t)("terminal.Back to terminal")),1)]),_:1})])]),_:1},8,["model-value","title"])],64)}}});const lo=R(ao,[["__scopeId","data-v-30ed251f"]]),so={class:"nav-menu-item"},ro=["src"],uo={class:"admin-name"},co={class:"admin-info-base"},io=["src"],mo={class:"admin-info-other"},_o={class:"admin-info-name"},po={class:"admin-info-lasttime"},fo={class:"admin-info-footer"},vo=A({__name:"navMenus",setup(v){j(g=>({"1408a152":e(r).getColorVal("headerBarBackground"),"1db40c32":e(r).getColorVal("headerBarTabColor"),"10b3a014":e(r).getColorVal("headerBarHoverBackground")}));const{t}=xe(),o=De(),r=N(),c=we(),d=O({isFullScreen:!1,currentNavMenu:"",showLayoutDrawer:!1}),f=(g,a)=>{d.currentNavMenu=g?a:""},w=()=>{if(!de.isEnabled)return rt.warning(t("layouts.Full screen is not supported")),!1;de.toggle(),de.onchange(()=>{d.isFullScreen=de.isFullscreen})},h=()=>{_e({name:"routine/adminInfo"})},u=()=>{ht().then(()=>{J.remove(he),Ee.go(0)})},m=g=>{if(g=="storage"||g=="all"){const a=J.get(he),s=J.get(Ie);if(ne.clear(),J.clear(),J.set(he,a),J.set(Ie,s),g=="storage")return}tt(g).then(()=>{})};return(g,a)=>{const s=p("Icon"),V=p("router-link"),q=p("el-dropdown-item"),k=p("el-dropdown-menu"),U=p("el-dropdown"),G=p("el-badge"),F=p("el-avatar"),b=p("el-button"),$=p("el-popover");return i(),B("div",{class:D(["nav-menus",e(r).layout.layoutMode])},[n(V,{class:"h100",target:"_blank",title:e(t)("Home"),to:"/"},{default:l(()=>[_("div",so,[n(s,{color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Monitor",size:"18"},null,8,["color"])])]),_:1},8,["title"]),n(U,{onVisibleChange:a[0]||(a[0]=S=>f(S,"lang")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:l(()=>[n(k,{class:"dropdown-menu-box"},{default:l(()=>[(i(!0),B(E,null,le(e(r).lang.langArray,S=>(i(),C(q,{key:S.name,onClick:W=>e(et)(S.name)},{default:l(()=>[M(T(S.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:l(()=>[_("div",{class:D(["nav-menu-item pt2",d.currentNavMenu=="lang"?"hover":""])},[n(s,{color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-lang",size:"18"},null,8,["color"])],2)]),_:1}),_("div",{onClick:w,class:D(["nav-menu-item",d.isFullScreen?"hover":""])},[d.isFullScreen?(i(),C(s,{key:0,color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-full-screen-cancel",size:"18"},null,8,["color"])):(i(),C(s,{key:1,color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-FullScreen",size:"18"},null,8,["color"]))],2),e(o).super?(i(),B("div",{key:0,onClick:a[1]||(a[1]=S=>e(c).toggle()),class:"nav-menu-item pt2"},[n(G,{"is-dot":e(c).state.showDot},{default:l(()=>[n(s,{color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-terminal",size:"26"},null,8,["color"])]),_:1},8,["is-dot"])])):I("",!0),e(o).super?(i(),C(U,{key:1,onVisibleChange:a[5]||(a[5]=S=>f(S,"clear")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:l(()=>[n(k,{class:"dropdown-menu-box"},{default:l(()=>[n(q,{onClick:a[2]||(a[2]=S=>m("tp"))},{default:l(()=>[M(T(e(t)("utils.Clean up system cache")),1)]),_:1}),n(q,{onClick:a[3]||(a[3]=S=>m("storage"))},{default:l(()=>[M(T(e(t)("utils.Clean up browser cache")),1)]),_:1}),n(q,{onClick:a[4]||(a[4]=S=>m("all")),divided:""},{default:l(()=>[M(T(e(t)("utils.Clean up all cache")),1)]),_:1})]),_:1})]),default:l(()=>[_("div",{class:D(["nav-menu-item",d.currentNavMenu=="clear"?"hover":""])},[n(s,{color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Delete",size:"18"},null,8,["color"])],2)]),_:1})):I("",!0),n($,{onShow:a[6]||(a[6]=S=>f(!0,"adminInfo")),onHide:a[7]||(a[7]=S=>f(!1,"adminInfo")),placement:"bottom-end","hide-after":0,width:260,trigger:"click","popper-class":"admin-info-box"},{reference:l(()=>[_("div",{class:D(["admin-info",d.currentNavMenu=="adminInfo"?"hover":""])},[n(F,{size:25,fit:"fill"},{default:l(()=>[_("img",{src:e(Ve)(e(o).avatar),alt:""},null,8,ro)]),_:1}),_("div",uo,T(e(o).nickname),1)],2)]),default:l(()=>[_("div",null,[_("div",co,[n(F,{size:70,fit:"fill"},{default:l(()=>[_("img",{src:e(Ve)(e(o).avatar),alt:""},null,8,io)]),_:1}),_("div",mo,[_("div",_o,T(e(o).nickname),1),_("div",po,T(e(o).last_login_time),1)])]),_("div",fo,[n(b,{onClick:h,type:"primary",plain:""},{default:l(()=>[M(T(e(t)("layouts.personal data")),1)]),_:1}),n(b,{onClick:u,type:"danger",plain:""},{default:l(()=>[M(T(e(t)("layouts.cancellation")),1)]),_:1})])])]),_:1}),_("div",{onClick:a[8]||(a[8]=S=>e(r).setLayout("showDrawer",!0)),class:"nav-menu-item"},[n(s,{color:e(r).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"fa fa-cogs",size:"18"},null,8,["color"])]),n(Jt),n(lo)],2)}}});const ve=R(vo,[["__scopeId","data-v-0fbb82a1"]]),go={class:"nav-bar"},yo=A({__name:"default",setup(v){j(o=>({"341e91f0":e(t).getColorVal("headerBarTabColor"),"7d0afb8a":e(t).getColorVal("headerBarTabActiveColor"),"5eccd556":e(t).getColorVal("headerBarTabActiveBackground")}));const t=N();return(o,r)=>(i(),B("div",go,[n(Xe),n(ve)]))}});const bo=R(yo,[["__scopeId","data-v-8d90b156"]]),ho={class:"nav-bar"},Co={key:0,class:"unfold"},ko=A({__name:"classic",setup(v){j(r=>({"88b2895c":e(t).getColorVal("headerBarBackground"),"6a10a632":e(t).getColorVal("headerBarTabColor"),d50d5368:e(t).getColorVal("headerBarTabActiveColor"),"4c5473d8":e(t).getColorVal("headerBarHoverBackground"),a7c0b85a:e(t).getColorVal("headerBarTabActiveBackground")}));const t=N(),o=()=>{pt("ba-aside-menu-shade",()=>{t.setLayout("menuCollapse",!0)}),t.setLayout("menuCollapse",!1)};return(r,c)=>{const d=p("Icon");return i(),B("div",ho,[e(t).layout.shrink&&e(t).layout.menuCollapse?(i(),B("div",Co,[n(d,{onClick:o,name:"fa fa-indent",color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["color"])])):I("",!0),e(t).layout.shrink?I("",!0):(i(),C(Xe,{key:1})),n(ve)])}}});const xo=R(ko,[["__scopeId","data-v-af750839"]]),wo={class:"layouts-menu-horizontal"},To={key:0,class:"menu-horizontal-logo"},So=A({__name:"menuHorizontal",setup(v){j(u=>({"229d1d8d":e(o).getColorVal("headerBarHoverBackground"),"33daf554":e(o).getColorVal("menuBackground"),"896b622e":e(o).getColorVal("menuColor"),"3f6959c3":e(o).getColorVal("menuActiveColor"),bc6b9a88:e(o).getColorVal("menuActiveBackground")}));const t=Z(),o=N(),r=P(),c=te(),d=O({menuKey:me(),defaultActive:""}),f=Q(()=>(d.menuKey=me(),r.state.tabsViewRoutes)),w=u=>{d.defaultActive=u.path},h=()=>{ee(()=>{var m;let u=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!u)return!1;(m=t.value)==null||m.setScrollTop(u.offsetTop)})};return X(()=>{w(c),h()}),ue(u=>{w(u)}),(u,m)=>{const g=p("el-menu"),a=p("el-scrollbar");return i(),B("div",wo,[e(o).layout.menuShowTopBar?(i(),B("div",To,[n(Ke)])):I("",!0),n(a,{ref_key:"horizontalMenusRef",ref:t,class:"horizontal-menus-scrollbar"},{default:l(()=>[(i(),C(g,{class:"menu-horizontal",mode:"horizontal","default-active":d.defaultActive,key:d.menuKey},{default:l(()=>[n(pe,{menus:f.value},null,8,["menus"])]),_:1},8,["default-active"]))]),_:1},512),n(ve)])}}});const Bo=R(So,[["__scopeId","data-v-6aa3158a"]]),Mo={class:"layouts-menu-horizontal-double"},$o=A({__name:"double",setup(v){j(u=>({"173d9c9f":e(o).getColorVal("menuBackground"),"62de0e00":e(o).getColorVal("menuColor"),"33a12b9a":e(o).getColorVal("menuActiveColor"),"68a22176":e(o).getColorVal("menuActiveBackground")}));const t=Z(),o=N(),r=P(),c=te(),d=O({menuKey:me(),defaultActive:""}),f=Q(()=>(d.menuKey=me(),r.state.tabsViewRoutes)),w=u=>{Be(u.path,r.state.tabsViewRoutes)&&(d.defaultActive=u.path)},h=()=>{ee(()=>{var m;let u=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!u)return!1;(m=t.value)==null||m.setScrollTop(u.offsetTop)})};return X(()=>{w(c),h()}),ue(u=>{w(u)}),(u,m)=>{const g=p("el-menu"),a=p("el-scrollbar");return i(),B("div",Mo,[n(a,{ref_key:"horizontalMenusRef",ref:t,class:"double-menus-scrollbar"},{default:l(()=>[(i(),C(g,{class:"menu-horizontal",mode:"horizontal","default-active":d.defaultActive,key:d.menuKey},{default:l(()=>[n(pe,{menus:f.value},null,8,["menus"])]),_:1},8,["default-active"]))]),_:1},512),n(ve)])}}});const Vo=R($o,[["__scopeId","data-v-df6db00e"]]),Io=A({name:"layout/header",components:{DefaultNavBar:bo,ClassicNavBar:xo,StreamlineNavBar:Bo,DoubleNavBar:Vo},__name:"header",setup(v){const t=N(),o=P();return(r,c)=>{const d=p("el-header");return e(o).state.tabFullScreen?I("",!0):(i(),C(d,{key:0,class:"layout-header"},{default:l(()=>[(i(),C(Se(e(t).layout.layoutMode+"NavBar")))]),_:1}))}}});const ge=R(Io,[["__scopeId","data-v-9014eea9"]]),Ao=A({name:"layout/main",__name:"main",setup(v){const{proxy:t}=je(),o=te(),r=N(),c=P(),d=Z(),f=O({componentKey:o.path,keepAliveComponentNameList:[]}),w=function(h){if(h){if(f.keepAliveComponentNameList.find(m=>m===h))return;f.keepAliveComponentNameList.push(h)}};return He(()=>{t.eventBus.on("onTabViewRefresh",h=>{f.keepAliveComponentNameList=f.keepAliveComponentNameList.filter(u=>h.meta.keepalive!==u),f.componentKey="",ee(()=>{f.componentKey=h.path,w(h.meta.keepalive)})}),t.eventBus.on("onTabViewClose",h=>{f.keepAliveComponentNameList=f.keepAliveComponentNameList.filter(u=>h.meta.keepalive!==u)})}),ut(()=>{t.eventBus.off("onTabViewRefresh"),t.eventBus.off("onTabViewClose")}),X(()=>{var h,u;typeof((h=c.state.activeRoute)==null?void 0:h.meta.keepalive)=="string"&&w((u=c.state.activeRoute)==null?void 0:u.meta.keepalive)}),We(()=>o.path,()=>{var h,u;f.componentKey=o.path,typeof((h=c.state.activeRoute)==null?void 0:h.meta.keepalive)=="string"&&w((u=c.state.activeRoute)==null?void 0:u.meta.keepalive)}),ct("mainScrollbarRef",d),(h,u)=>{const m=p("router-view"),g=p("el-scrollbar"),a=p("el-main");return i(),C(a,{class:"layout-main"},{default:l(()=>[n(g,{class:"layout-main-scrollbar",style:ae(e(vt)()),ref_key:"mainScrollbarRef",ref:d},{default:l(()=>[n(m,null,{default:l(({Component:s})=>[n(Te,{name:e(r).layout.mainAnimation,mode:"out-in"},{default:l(()=>[(i(),C(it,{include:f.keepAliveComponentNameList},[(i(),C(Se(s),{key:f.componentKey}))],1032,["include"]))]),_:2},1032,["name"])]),_:1})]),_:1},8,["style"])]),_:1})}}});const ye=R(Ao,[["__scopeId","data-v-9573a780"]]),Ro=v=>(qe("data-v-0aa634f1"),v=v(),Ue(),v),Fo=["title","onMouseover","onMouseout"],Lo=["onClick"],zo=Ro(()=>_("div",{class:"close-full-screen-on"},null,-1)),Do=A({__name:"closeFullScreen",setup(v){const t=P(),o=O({closeBoxTop:20});X(()=>{setTimeout(()=>{o.closeBoxTop=-30},300)});const r=()=>{o.closeBoxTop=20},c=()=>{o.closeBoxTop=-30},d=()=>{t.setFullScreen(!1)};return(f,w)=>{const h=p("Icon");return i(),B("div",{title:f.$t("layouts.Exit full screen"),onMouseover:se(r,["stop"]),onMouseout:se(c,["stop"])},[_("div",{onClick:se(d,["stop"]),class:"close-full-screen",style:ae({top:o.closeBoxTop+"px"})},[n(h,{name:"el-icon-Close"})],12,Lo),zo],40,Fo)}}});const be=R(Do,[["__scopeId","data-v-0aa634f1"]]),Eo=A({__name:"default",setup(v){const t=P();return(o,r)=>{const c=p("el-container");return i(),B(E,null,[n(c,{class:"layout-container"},{default:l(()=>[n(Me),n(c,{class:"content-wrapper"},{default:l(()=>[n(ge),n(ye)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),C(be,{key:0})):I("",!0)],64)}}});const No=R(Eo,[["__scopeId","data-v-59d252c1"]]),Po=A({__name:"classic",setup(v){const t=P();return(o,r)=>{const c=p("el-container");return i(),B(E,null,[n(c,{class:"layout-container"},{default:l(()=>[n(Me),n(c,{class:"content-wrapper"},{default:l(()=>[n(ge),n(ye)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),C(be,{key:0})):I("",!0)],64)}}});const qo=R(Po,[["__scopeId","data-v-fb349671"]]),Uo=A({__name:"streamline",setup(v){const t=P();return(o,r)=>{const c=p("el-container");return i(),B(E,null,[n(c,{class:"layout-container"},{default:l(()=>[n(c,{class:"content-wrapper"},{default:l(()=>[n(ge),n(ye)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),C(be,{key:0})):I("",!0)],64)}}});const Wo=R(Uo,[["__scopeId","data-v-fcdc1bd3"]]),Ho=A({__name:"double",setup(v){const t=P();return(o,r)=>{const c=p("el-container");return i(),B(E,null,[n(c,{class:"layout-container"},{default:l(()=>[n(Me),n(c,{class:"content-wrapper"},{default:l(()=>[n(ge),n(ye)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),C(be,{key:0})):I("",!0)],64)}}});const Oo=R(Ho,[["__scopeId","data-v-d08319bd"]]),on=A({components:{Default:No,Classic:qo,Streamline:Wo,Double:Oo},__name:"index",setup(v){const t=we(),o=P(),r=N(),c=te(),d=ze(),f=De(),w=O({autoMenuCollapseLock:!1});X(()=>{if(!f.token)return Ee.push({name:"adminLogin"});h(),ke(),Ce(window,"resize",ke)}),He(()=>{u(),Ce(window,"resize",u)});const h=()=>{Ct().then(m=>{if(d.dataFill(m.data.siteConfig),t.changePort(m.data.terminal.installServicePort),t.changePackageManager(m.data.terminal.npmPackageManager),f.dataFill(m.data.adminInfo),m.data.menus){if(ft(m.data.menus),c.params.to){const a=JSON.parse(c.params.to);if(a.path!=ot.path){let s=dt(a.query)?{}:a.query;_e({path:a.path,query:s});return}}let g=Oe(o.state.tabsViewRoutes);g&&_e(g.path)}})},u=()=>{let m={layoutMode:r.layout.layoutMode,menuCollapse:r.layout.menuCollapse},g=ne.get(re);if(g||ne.set(re,m),document.body.clientWidth<1024)w.autoMenuCollapseLock||(w.autoMenuCollapseLock=!0,r.setLayout("menuCollapse",!0)),r.setLayout("shrink",!0),r.setLayoutMode("Classic");else{w.autoMenuCollapseLock=!1;let s=g||m;r.setLayout("menuCollapse",s.menuCollapse),r.setLayout("shrink",!1),r.setLayoutMode(s.layoutMode)}};return(m,g)=>(i(),C(Se(e(r).layout.layoutMode)))}});export{on as default};
