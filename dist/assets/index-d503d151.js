import{d as o,r as s,c as u,u as d,a as f,g as m,s as l}from"./index-a32a01c5.js";import{h as p}from"./router-402b9d32.js";import{i as c}from"./vue-9888607f.js";const g="/api/index/";function C(a,r){o(()=>{if(s.currentRoute.value.meta.initialize===!1)return;const i=u(),t=d();if(!i.isLogin()&&t.initialize||i.isLogin()&&t.userInitialize)return;const n=f();m({url:g+"index",method:"get",params:{requiredLogin:r?1:0}}).then(e=>{l(e.data.site.siteName),p(e.data.rules,e.data.menus),t.dataFill(e.data.site),n.setStatus(e.data.openMemberCenter),c(e.data.userInfo)||(e.data.userInfo.refresh_token=i.getToken("refresh"),i.dataFill(e.data.userInfo),t.setUserInitialize(!0)),e.data.openMemberCenter||n.setLayoutMode("Disable"),t.setInitialize(!0),typeof a=="function"&&a(e)})},200)()}export{C as i};
