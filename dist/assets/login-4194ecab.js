var W=Object.defineProperty;var J=(o,s,u)=>s in o?W(o,s,{enumerable:!0,configurable:!0,writable:!0,value:u}):o[s]=u;var h=(o,s,u)=>(J(o,typeof s!="symbol"?s+"":s,u),u);import{h as O,w as b,r as v,E as Y,n as Z,a7 as j,q as d,o as y,k as L,m as r,p as a,P as i,Z as G,Y as Q,O as X,V as z,U as P,z as m,a8 as ee,a9 as te,J as oe,a1 as ae,a2 as se}from"./vue-7c431e9b.js";import{_ as ne}from"./login-header-0d634706.js";import{e as le,q as ie,t as re,v as ce,g as de,f as ue,r as me,_ as pe}from"./index-764fcd0d.js";import{l as q}from"./index-5732cbd7.js";import{b as g}from"./validate-6a14e75e.js";import{c as he}from"./index-1f4e31a5.js";import{t as fe}from"./useDark-fd3fbc32.js";const e={width:0,height:0,bubbleEl:null,canvas:null,ctx:{},circles:[],animate:!0,requestId:null},_e=function(){e.width=window.innerWidth,e.height=window.innerHeight,e.bubbleEl=document.getElementById("bubble"),e.bubbleEl.style.height=e.height+"px",e.canvas=document.getElementById("bubble-canvas"),e.canvas.width=e.width,e.canvas.height=e.height,e.ctx=e.canvas.getContext("2d"),e.circles=[];for(let o=0;o<e.width*.5;o++){const s=new ge;e.circles.push(s)}B(),we()};function M(){e.animate=!(document.body.scrollTop>e.height)}function S(){e.width=window.innerWidth,e.height=window.innerHeight,e.bubbleEl.style.height=e.height+"px",e.canvas.width=e.width,e.canvas.height=e.height}function B(){if(e.animate){e.ctx.clearRect(0,0,e.width,e.height);for(const o in e.circles)e.circles[o].draw()}e.requestId=requestAnimationFrame(B)}class ge{constructor(){h(this,"pos");h(this,"alpha");h(this,"scale");h(this,"velocity");h(this,"draw");this.pos={x:Math.random()*e.width,y:e.height+Math.random()*100},this.alpha=.1+Math.random()*.3,this.scale=.1+Math.random()*.3,this.velocity=Math.random(),this.draw=function(){this.pos.y-=this.velocity,this.alpha-=5e-4,e.ctx.beginPath(),e.ctx.arc(this.pos.x,this.pos.y,this.scale*10,0,2*Math.PI,!1),e.ctx.fillStyle="rgba(255,255,255,"+this.alpha+")",e.ctx.fill()}}}function we(){window.addEventListener("scroll",M),window.addEventListener("resize",S)}function be(){window.removeEventListener("scroll",M),window.removeEventListener("resize",S),cancelAnimationFrame(e.requestId)}const R=o=>(ae("data-v-11ba6111"),o=o(),se(),o),ve={class:"switch-language"},ye=R(()=>r("canvas",{id:"bubble-canvas",class:"bubble-canvas"},null,-1)),xe=[ye],ke={class:"login"},Ie={class:"login-box"},Ce=R(()=>r("div",{class:"head"},[r("img",{src:ne,alt:""})],-1)),Ve={class:"form"},Ee=["src"],Le={class:"content"},ze=O({__name:"login",setup(o){let s;const u=le(),U=ie();fe(u.layout.isDark);const x=b(),k=b(),I=b(),f=v({showCaptcha:!1,submitLoading:!1}),n=v({username:"",password:"",keep:!1,captchaId:re(),captchaInfo:""}),{t:p}=ce(),D=v({username:[g({name:"required",message:p("login.Please enter an account")}),g({name:"account"})],password:[g({name:"required",message:p("login.Please input a password")}),g({name:"password"})]}),T=()=>{n.username===""?k.value.focus():n.password===""&&I.value.focus()};Y(()=>{s=window.setTimeout(()=>{_e()},1e3),q("get").then(c=>{f.showCaptcha=c.data.captcha,Z(()=>T())}).catch(c=>{console.log(c)})}),j(()=>{clearTimeout(s),be()});const C=()=>{var c;(c=x.value)==null||c.validate(t=>{t&&(f.showCaptcha?he(n.captchaId,_=>V(_)):V())})},V=(c="")=>{f.submitLoading=!0,n.captchaInfo=c,q("post",n).then(t=>{U.dataFill(t.data.userInfo),oe({message:t.msg,type:"success"}),me.push({path:t.data.routePath})}).finally(()=>{f.submitLoading=!1})};return(c,t)=>{const _=d("Icon"),A=d("el-dropdown-item"),F=d("el-dropdown-menu"),N=d("el-dropdown"),E=d("el-input"),w=d("el-form-item"),$=d("el-checkbox"),H=d("el-button"),K=d("el-form");return y(),L("div",null,[r("div",ve,[a(N,{size:"large","hide-timeout":50,placement:"bottom-end","hide-on-click":!0},{dropdown:i(()=>[a(F,{class:"chang-lang"},{default:i(()=>[(y(!0),L(G,null,Q(m(u).lang.langArray,l=>(y(),X(A,{key:l.name,onClick:Pe=>m(de)(l.name)},{default:i(()=>[z(P(l.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:i(()=>[a(_,{name:"fa fa-globe",color:"var(--el-text-color-secondary)",size:"28"})]),_:1})]),r("div",{onContextmenu:t[0]||(t[0]=ee(()=>{},["stop"])),id:"bubble",class:"bubble"},xe,32),r("div",ke,[r("div",Ie,[Ce,r("div",Ve,[r("img",{class:"profile-avatar",src:m(ue)("/static/images/avatar.png"),alt:""},null,8,Ee),r("div",Le,[a(K,{onKeyup:t[5]||(t[5]=te(l=>C(),["enter"])),ref_key:"formRef",ref:x,rules:D,size:"large",model:n},{default:i(()=>[a(w,{prop:"username"},{default:i(()=>[a(E,{ref_key:"usernameRef",ref:k,type:"text",clearable:"",modelValue:n.username,"onUpdate:modelValue":t[1]||(t[1]=l=>n.username=l),placeholder:m(p)("login.Please enter an account")},{prefix:i(()=>[a(_,{name:"fa fa-user",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["modelValue","placeholder"])]),_:1}),a(w,{prop:"password"},{default:i(()=>[a(E,{ref_key:"passwordRef",ref:I,modelValue:n.password,"onUpdate:modelValue":t[2]||(t[2]=l=>n.password=l),type:"password",placeholder:m(p)("login.Please input a password"),"show-password":""},{prefix:i(()=>[a(_,{name:"fa fa-unlock-alt",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["modelValue","placeholder"])]),_:1}),a($,{modelValue:n.keep,"onUpdate:modelValue":t[3]||(t[3]=l=>n.keep=l),label:m(p)("login.Hold session"),size:"default"},null,8,["modelValue","label"]),a(w,null,{default:i(()=>[a(H,{loading:f.submitLoading,class:"submit-button",round:"",type:"primary",size:"large",onClick:t[4]||(t[4]=l=>C())},{default:i(()=>[z(P(m(p)("login.Sign in")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["rules","model"])])])])])])}}});const Ae=pe(ze,[["__scopeId","data-v-11ba6111"]]);export{Ae as default};
