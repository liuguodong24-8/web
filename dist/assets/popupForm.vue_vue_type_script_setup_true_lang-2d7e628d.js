import{h as I,w as b,au as N,r as O,E as W,q as n,X as p,o as s,O as u,P as r,_,k as $,V as c,U as g,z as e,m as V,l as y,p as m,$ as E,ac as T,a8 as A,W as K}from"./vue-9888607f.js";import{t as M,g as R,ah as j}from"./index-9606f8b9.js";import{F as d}from"./index-3663f9d1.js";import{b as w}from"./validate-f45aa004.js";const q={class:"title"},J=I({__name:"popupForm",setup(L){b(!1);const x=b(""),f=b(),o=N("baTable"),{t:a}=M(),C=O({update_time:[w({name:"date",title:a("dev.update_time")})],create_time:[w({name:"date",title:a("dev.create_time")})]}),k=()=>{R({url:j()+"/admin/index/name",method:"get"}).then(i=>{x.value=i.msg,o.form.items.operator=i.msg}).catch(i=>{console.error("请求数据失败",i)})};return W(()=>{k()}),(i,t)=>{const S=n("el-form"),U=n("el-scrollbar"),v=n("el-button"),h=n("el-dialog"),z=p("drag"),F=p("zoom"),B=p("loading"),D=p("blur");return s(),u(h,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":["Add","Edit"].includes(e(o).form.operate),onClose:e(o).toggleForm,width:"50%"},{header:r(()=>[_((s(),$("div",q,[c(g(e(o).form.operate?e(a)(e(o).form.operate):""),1)])),[[z,[".ba-operate-dialog",".el-dialog__header"]],[F,".ba-operate-dialog"]])]),footer:r(()=>[V("div",{style:y("width: calc(100% - "+e(o).form.labelWidth/1.8+"px)")},[m(v,{onClick:t[7]||(t[7]=l=>e(o).toggleForm())},{default:r(()=>[c(g(e(a)("Cancel")),1)]),_:1}),_((s(),u(v,{loading:e(o).form.submitLoading,onClick:t[8]||(t[8]=l=>e(o).onSubmit(f.value)),type:"primary"},{default:r(()=>[c(g(e(o).form.operateIds&&e(o).form.operateIds.length>1?e(a)("Save and edit next item"):e(a)("Save")),1)]),_:1},8,["loading"])),[[D]])],4)]),default:r(()=>[_((s(),u(U,{class:"ba-table-form-scrollbar"},{default:r(()=>[V("div",{class:E(["ba-operate-form","ba-"+e(o).form.operate+"-form"]),style:y("width: calc(100% - "+e(o).form.labelWidth/2+"px)")},[e(o).form.loading?K("",!0):(s(),u(S,{key:0,ref_key:"formRef",ref:f,onSubmit:t[5]||(t[5]=T(()=>{},["prevent"])),onKeyup:t[6]||(t[6]=A(l=>e(o).onSubmit(f.value),["enter"])),model:e(o).form.items,"label-position":"right","label-width":e(o).form.labelWidth+"px",rules:C},{default:r(()=>[m(d,{label:e(a)("开始时间"),type:"datetime",modelValue:e(o).form.items.start_time,"onUpdate:modelValue":t[0]||(t[0]=l=>e(o).form.items.start_time=l),prop:"start_time"},null,8,["label","modelValue"]),m(d,{label:e(a)("结束时间"),type:"datetime",modelValue:e(o).form.items.end_time,"onUpdate:modelValue":t[1]||(t[1]=l=>e(o).form.items.end_time=l),prop:"end_time"},null,8,["label","modelValue"]),m(d,{label:e(a)("班级"),type:"string",modelValue:e(o).form.items.class_name,"onUpdate:modelValue":t[2]||(t[2]=l=>e(o).form.items.class_name=l),prop:"class_name"},null,8,["label","modelValue"]),m(d,{label:e(a)("设备"),type:"string",modelValue:e(o).form.items.device_id,"onUpdate:modelValue":t[3]||(t[3]=l=>e(o).form.items.device_id=l),prop:"device_id"},null,8,["label","modelValue"]),m(d,{label:e(a)("操作人"),type:"string",modelValue:e(o).form.items.operator,"onUpdate:modelValue":t[4]||(t[4]=l=>e(o).form.items.operator=l),"model-value":"defaultOperator"},null,8,["label","modelValue"])]),_:1},8,["model","label-width","rules"]))],6)]),_:1})),[[B,e(o).form.loading]])]),_:1},8,["model-value","onClose"])}}});export{J as _};
