import{h as D,w as v,au as I,r as N,q as n,X as p,o as i,O as u,P as r,_ as b,k as W,V as _,U as c,z as e,m as V,l as y,p as m,$,ac as O,a8 as T,W as A}from"./vue-9888607f.js";import{t as E,g as K,ah as R}from"./index-a32a01c5.js";import{F as s}from"./index-7c3dd670.js";import{b as w}from"./validate-1cd91476.js";const j={class:"title"},G=D({__name:"popupForm",setup(q){v(!1);const x=()=>{K({url:R()+"/admin/index/name",method:"get"}).then(d=>{o.form.items.operator=d.msg}).catch(d=>{console.error("请求数据失败",d)})},f=v(),o=I("baTable"),{t:a}=E(),C=N({update_time:[w({name:"date",title:a("dev.update_time")})],create_time:[w({name:"date",title:a("dev.create_time")})]});return(d,t)=>{const k=n("el-form"),S=n("el-scrollbar"),g=n("el-button"),U=n("el-dialog"),h=p("drag"),z=p("zoom"),F=p("loading"),B=p("blur");return i(),u(U,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":["Add","Edit"].includes(e(o).form.operate),onOpen:x,onClose:e(o).toggleForm,width:"50%"},{header:r(()=>[b((i(),W("div",j,[_(c(e(o).form.operate?e(a)(e(o).form.operate):""),1)])),[[h,[".ba-operate-dialog",".el-dialog__header"]],[z,".ba-operate-dialog"]])]),footer:r(()=>[V("div",{style:y("width: calc(100% - "+e(o).form.labelWidth/1.8+"px)")},[m(g,{onClick:t[7]||(t[7]=l=>e(o).toggleForm())},{default:r(()=>[_(c(e(a)("Cancel")),1)]),_:1}),b((i(),u(g,{loading:e(o).form.submitLoading,onClick:t[8]||(t[8]=l=>e(o).onSubmit(f.value)),type:"primary"},{default:r(()=>[_(c(e(o).form.operateIds&&e(o).form.operateIds.length>1?e(a)("Save and edit next item"):e(a)("Save")),1)]),_:1},8,["loading"])),[[B]])],4)]),default:r(()=>[b((i(),u(S,{class:"ba-table-form-scrollbar"},{default:r(()=>[V("div",{class:$(["ba-operate-form","ba-"+e(o).form.operate+"-form"]),style:y("width: calc(100% - "+e(o).form.labelWidth/2+"px)")},[e(o).form.loading?A("",!0):(i(),u(k,{key:0,ref_key:"formRef",ref:f,onSubmit:t[5]||(t[5]=O(()=>{},["prevent"])),onKeyup:t[6]||(t[6]=T(l=>e(o).onSubmit(f.value),["enter"])),model:e(o).form.items,"label-position":"right","label-width":e(o).form.labelWidth+"px",rules:C},{default:r(()=>[m(s,{label:e(a)("开始时间"),type:"datetime",modelValue:e(o).form.items.start_time,"onUpdate:modelValue":t[0]||(t[0]=l=>e(o).form.items.start_time=l),prop:"start_time"},null,8,["label","modelValue"]),m(s,{label:e(a)("结束时间"),type:"datetime",modelValue:e(o).form.items.end_time,"onUpdate:modelValue":t[1]||(t[1]=l=>e(o).form.items.end_time=l),prop:"end_time"},null,8,["label","modelValue"]),m(s,{label:e(a)("班级"),type:"string",modelValue:e(o).form.items.class_name,"onUpdate:modelValue":t[2]||(t[2]=l=>e(o).form.items.class_name=l),prop:"class_name"},null,8,["label","modelValue"]),m(s,{label:e(a)("设备"),type:"string",modelValue:e(o).form.items.device_id,"onUpdate:modelValue":t[3]||(t[3]=l=>e(o).form.items.device_id=l),prop:"device_id"},null,8,["label","modelValue"]),m(s,{label:e(a)("操作人"),type:"string",modelValue:e(o).form.items.operator,"onUpdate:modelValue":t[4]||(t[4]=l=>e(o).form.items.operator=l),prop:"operator"},null,8,["label","modelValue"])]),_:1},8,["model","label-width","rules"]))],6)]),_:1})),[[F,e(o).form.loading]])]),_:1},8,["model-value","onClose"])}}});export{G as _};
