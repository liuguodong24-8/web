import{d as M,b as U,T as R,a as D}from"./index-7f28922b.js";import{t as $,a1 as O,g as c,ae as d}from"./index-ff2ea991.js";import{_ as Q}from"./popupForm.vue_vue_type_script_setup_true_lang-0dbaeb54.js";import{_ as H}from"./scanQrCode.vue_vue_type_script_setup_true_lang-686c874f.js";import W from"./index-33919a76.js";import{h as Y,w as s,ap as Z,E as j,q as _,o,k as p,z,O as i,W as J,p as r,P as u,m as F,Z as g,Y as f,V as X}from"./vue-5df46ab8.js";import"./index-8020abbe.js";import"./index-4fdfed13.js";import"./validate-358b5494.js";import"./qrcode.vue.esm-b276e88c.js";const ee={class:"default-main ba-table-box"},ae={class:"multiselect-search"},me=Y({name:"activity",__name:"index",setup(le){const m=s([]),b=s([]),h=s([]),k=s([]),V=s([]),C=s([]),L=s([]),E=s([]),{t:a}=$(),q=s();M(["edit"]);const x=()=>{I()},I=()=>{c({url:d()+"/admin/DevList/index",method:"get",params:{school:m.value,grade:b.value,class:h.value,student:k.value}}).then(t=>{n.table.data=t.data.list}).catch(t=>{console.error("请求数据失败",t)})},P=()=>{c({url:d()+"/admin/dev/schoolList",method:"get"}).then(t=>{V.value=t.data}).catch(t=>{console.error("请求数据失败",t)})},S=t=>{c({url:d()+"/admin/dev/schoolList",method:"get",params:{key:t}}).then(l=>{C.value=l.data}).catch(l=>{console.error("请求数据失败",l)})},K=t=>{c({url:d()+"/admin/dev/schoolList",method:"get",params:{key:t}}).then(l=>{L.value=l.data}).catch(l=>{console.error("请求数据失败",l)})},T=t=>{c({url:d()+"/admin/dev/schoolList",method:"get",params:{key:t}}).then(l=>{E.value=l.data}).catch(l=>{console.error("请求数据失败",l)})},w=()=>{S(m.value)},N=()=>{K(b.value)},A=()=>{T(h.value)},n=new U(new O("/admin/ActivityDetail/"),{pk:"id",column:[{label:a("id"),prop:"id",align:"center",width:70,operator:"RANGE",sortable:"custom"},{label:a("学生名字"),prop:"user_name",align:"center",operatorPlaceholder:a("Fuzzy query"),operator:"LIKE",sortable:!1},{label:a("参加次数"),prop:"count",align:"center",operatorPlaceholder:a("Fuzzy query"),operator:"LIKE"},{label:a("学段名"),prop:"period.phase_name",align:"center",operatorPlaceholder:a("Fuzzy query"),render:"tags",operator:"LIKE"},{label:a("年级名"),prop:"grade.grade_name",align:"center",operatorPlaceholder:a("Fuzzy query"),render:"tags",operator:"LIKE"},{label:a("班级名"),prop:"class_name",align:"center",operatorPlaceholder:a("Fuzzy query"),operator:"LIKE",sortable:!1},{label:a("年份"),prop:"in_year",align:"center",operatorPlaceholder:a("Fuzzy query"),operator:"LIKE",sortable:!1},{label:a("学校名"),prop:"school_name",align:"center",operatorPlaceholder:a("Fuzzy query"),operator:"LIKE",sortable:!1},{label:a("班主任"),prop:"teacher_name",align:"center",operatorPlaceholder:a("Fuzzy query"),operator:"LIKE",sortable:!1},{label:a("监护人"),prop:"guardian_name",align:"center",operatorPlaceholder:a("Fuzzy query"),operator:"LIKE",sortable:!1},{label:a("更新时间"),prop:"update_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"}],dblClickNotEditColumn:[void 0]},{defaultItems:{}});return Z("baTable",n),j(()=>{var t;n.table.ref=q.value,n.mount(),(t=n.getIndex())==null||t.then(()=>{n.initSort(),n.dragSort()}),P()}),(t,l)=>{const B=_("el-alert"),v=_("el-option"),y=_("el-select"),G=_("el-button");return o(),p("div",ee,[z(n).table.remark?(o(),i(B,{key:0,class:"ba-table-alert",title:z(n).table.remark,type:"info","show-icon":""},null,8,["title"])):J("",!0),r(R,{buttons:["delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":z(a)("Quick search placeholder",{fields:"搜索字段"}),onMultiselectSearch:x},{refreshPrepend:u(()=>[F("div",null,[F("div",ae,[r(y,{style:{"margin-left":"20px"},modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=e=>m.value=e),onChange:w,clearable:"",filterable:""},{default:u(()=>[(o(!0),p(g,null,f(V.value,e=>(o(),i(v,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(y,{style:{"margin-left":"20px"},modelValue:b.value,"onUpdate:modelValue":l[1]||(l[1]=e=>b.value=e),onChange:N,clearable:"",filterable:""},{default:u(()=>[(o(!0),p(g,null,f(C.value,e=>(o(),i(v,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(y,{style:{"margin-left":"20px"},modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=e=>h.value=e),onChange:A,clearable:"",filterable:""},{default:u(()=>[(o(!0),p(g,null,f(L.value,e=>(o(),i(v,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(y,{style:{"margin-left":"20px"},modelValue:k.value,"onUpdate:modelValue":l[3]||(l[3]=e=>k.value=e),clearable:"",filterable:""},{default:u(()=>[(o(!0),p(g,null,f(E.value,e=>(o(),i(v,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),r(G,{onClick:x},{default:u(()=>[X("查询")]),_:1})])])]),_:1},8,["quick-search-placeholder"]),r(D,{ref_key:"tableRef",ref:q},null,512),r(Q),r(H,{ref:"popupQrcode"},null,512),r(W)])}}});export{me as default};
