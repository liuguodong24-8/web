import{h as Pe,r as _,o as r,k as Me,O as f,z as d,W as y,a8 as M,ac as z,w as _e,q as A,X as B,P as v,_ as Ee,V as O,U as R,m as De,l as Ie,p as b}from"./vue-9888607f.js";import{F as c}from"./index-7c3dd670.js";import{c as Ue,b as h}from"./validate-1cd91476.js";import{g as q,i as Ae,t as qe}from"./index-a32a01c5.js";import{i as P}from"./index-cfb50cde.js";const k="/admin/routine.Config/",S=new Map([["index",k+"index"],["add",k+"add"],["edit",k+"edit"],["del",k+"del"],["sendTestMail",k+"sendTestMail"]]);function Fe(){return q({url:S.get("index"),method:"get"})}function Se(g,V){return q({url:S.get(g),method:"post",data:V},{showSuccessMessage:!0})}function Le(g){return q({url:S.get("del"),method:"DELETE",params:{ids:g}},{showSuccessMessage:!0})}function $e(g,V){return q({url:S.get("sendTestMail"),method:"POST",data:Object.assign({},g,{testMail:V})},{showSuccessMessage:!0})}const Ke=Pe({__name:"createData",props:{dataTitle:{default:Ae.global.t("utils.Var")},modelValue:{default:()=>({name:"",title:"",type:"",tip:"",rule:[],extend:"",dict:"",inputExtend:""})},options:{},excludeInputTypes:{default:()=>[]},excludeValidatorRule:{default:()=>[]}},emits:["update:modelValue"],setup(g,{emit:V}){var u,C,T,w,E,D,I,U,p,W,F,L,$,G,j,X,H,J,Q,Y,Z,ee,te,le,ae,oe,ie,ne,ue,de,se,re;const{t:o}=Ae.global,t=g,i=["radio","checkbox","select","selects"],e=_({name:{show:((C=(u=t.options)==null?void 0:u.name)==null?void 0:C.show)!==!1,value:t.modelValue.name,title:((w=(T=t.options)==null?void 0:T.name)==null?void 0:w.title)??t.dataTitle+o("utils.Name")},title:{show:((D=(E=t.options)==null?void 0:E.title)==null?void 0:D.show)!==!1,value:t.modelValue.title,title:((U=(I=t.options)==null?void 0:I.title)==null?void 0:U.title)??t.dataTitle+o("utils.Title")},type:{show:((W=(p=t.options)==null?void 0:p.type)==null?void 0:W.show)!==!1,value:t.modelValue.type,title:((L=(F=t.options)==null?void 0:F.type)==null?void 0:L.title)??t.dataTitle+o("utils.type")},tip:{show:((G=($=t.options)==null?void 0:$.tip)==null?void 0:G.show)!==!1,value:t.modelValue.tip,title:((X=(j=t.options)==null?void 0:j.tip)==null?void 0:X.title)??o("utils.Tip")},rule:{show:((J=(H=t.options)==null?void 0:H.rule)==null?void 0:J.show)!==!1,value:t.modelValue.rule,title:((Y=(Q=t.options)==null?void 0:Q.rule)==null?void 0:Y.title)??o("utils.Rule")},extend:{show:((ee=(Z=t.options)==null?void 0:Z.extend)==null?void 0:ee.show)!==!1,value:t.modelValue.extend,title:((le=(te=t.options)==null?void 0:te.extend)==null?void 0:le.title)??"FormItem "+o("utils.Extend")},dict:{show:((oe=(ae=t.options)==null?void 0:ae.dict)==null?void 0:oe.show)!==!1,value:t.modelValue.dict,title:((ne=(ie=t.options)==null?void 0:ie.dict)==null?void 0:ne.title)??o("utils.Dict")},inputExtend:{show:((de=(ue=t.options)==null?void 0:ue.inputExtend)==null?void 0:de.show)!==!1,value:t.modelValue.inputExtend,title:((re=(se=t.options)==null?void 0:se.inputExtend)==null?void 0:re.title)??"Input "+o("utils.Extend")}}),a=_({validators:{},inputTypes:{}}),K=V,s=()=>{K("update:modelValue",{name:e.name.value??"",title:e.title.value??"",type:e.type.value??"",tip:e.tip.value??"",rule:e.rule.value??[],extend:e.extend.value??"",dict:i.includes(e.type.value??"")?e.dict.value??"":"",inputExtend:e.inputExtend.value??""})};return(()=>{let N={};for(const m in P)t.excludeInputTypes.includes(P[m])||(N[P[m]]=P[m]);a.inputTypes=N;let l={};for(const m in Ue)t.excludeValidatorRule.includes(m)||(l[m]=Ue[m]);a.validators=l,s()})(),(N,l)=>{var m,pe,me,fe,ce,ge,ye,Ve,ve,be,he,xe,we,ke,Ce,Te;return r(),Me("div",null,[e.name.show?(r(),f(c,{key:0,label:e.name.title,type:"string",modelValue:e.name.value,"onUpdate:modelValue":l[0]||(l[0]=n=>e.name.value=n),placeholder:d(o)("Please input field",{field:e.name.title}),"input-attr":{onChange:s,...(pe=(m=t.options)==null?void 0:m.name)==null?void 0:pe.inputAttr},prop:"name"},null,8,["label","modelValue","placeholder","input-attr"])):y("",!0),e.title.show?(r(),f(c,{key:1,label:e.title.title,type:"string",modelValue:e.title.value,"onUpdate:modelValue":l[1]||(l[1]=n=>e.title.value=n),placeholder:d(o)("Please input field",{field:e.title.title}),"input-attr":{onChange:s,...(fe=(me=t.options)==null?void 0:me.title)==null?void 0:fe.inputAttr},prop:"title"},null,8,["label","modelValue","placeholder","input-attr"])):y("",!0),e.type.show?(r(),f(c,{key:2,label:e.type.title,type:"select",modelValue:e.type.value,"onUpdate:modelValue":l[2]||(l[2]=n=>e.type.value=n),data:{content:a.inputTypes},placeholder:d(o)("Please select field",{field:e.type.title}),"input-attr":{onChange:s,...(ge=(ce=t.options)==null?void 0:ce.type)==null?void 0:ge.inputAttr},prop:"type"},null,8,["label","modelValue","data","placeholder","input-attr"])):y("",!0),e.dict.show&&i.includes(e.type.value)?(r(),f(c,{key:3,label:e.dict.title,type:"textarea",modelValue:e.dict.value,"onUpdate:modelValue":l[3]||(l[3]=n=>e.dict.value=n),"input-attr":{rows:3,placeholder:d(o)("utils.One line at a time, without quotation marks, for example: key1=value1"),onChange:s,...(Ve=(ye=t.options)==null?void 0:ye.dict)==null?void 0:Ve.inputAttr},prop:"dict",onKeyup:l[4]||(l[4]=M(z(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):y("",!0),e.tip.show?(r(),f(c,{key:4,label:e.tip.title,type:"string",modelValue:e.tip.value,"onUpdate:modelValue":l[5]||(l[5]=n=>e.tip.value=n),placeholder:d(o)("Please input field",{field:e.tip.title}),"input-attr":{onChange:s,...(be=(ve=t.options)==null?void 0:ve.tip)==null?void 0:be.inputAttr},prop:"tip"},null,8,["label","modelValue","placeholder","input-attr"])):y("",!0),e.rule.show?(r(),f(c,{key:5,label:e.rule.title,type:"selects",modelValue:e.rule.value,"onUpdate:modelValue":l[6]||(l[6]=n=>e.rule.value=n),data:{content:a.validators},placeholder:d(o)("Please select field",{field:e.rule.title}),"input-attr":{onChange:s,...(xe=(he=t.options)==null?void 0:he.rule)==null?void 0:xe.inputAttr},prop:"rule"},null,8,["label","modelValue","data","placeholder","input-attr"])):y("",!0),e.extend.show?(r(),f(c,{key:6,label:e.extend.title,type:"textarea",modelValue:e.extend.value,"onUpdate:modelValue":l[7]||(l[7]=n=>e.extend.value=n),"input-attr":{onChange:s,placeholder:d(o)("utils.One attribute per line without quotation marks(formitem)"),...(ke=(we=t.options)==null?void 0:we.extend)==null?void 0:ke.inputAttr},prop:"extend",onKeyup:l[8]||(l[8]=M(z(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):y("",!0),e.inputExtend.show?(r(),f(c,{key:7,label:e.inputExtend.title,type:"textarea",modelValue:e.inputExtend.value,"onUpdate:modelValue":l[9]||(l[9]=n=>e.inputExtend.value=n),"input-attr":{onChange:s,placeholder:d(o)("utils.Extended properties of Input, one line without quotation marks, such as: size=large"),...(Te=(Ce=t.options)==null?void 0:Ce.inputExtend)==null?void 0:Te.inputAttr},prop:"inputExtend",onKeyup:l[10]||(l[10]=M(z(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):y("",!0)])}}}),Ne={class:"title"},Ge=Pe({__name:"add",props:{modelValue:{type:Boolean,default:!1},configGroup:{default:()=>({})}},emits:["update:modelValue"],setup(g,{emit:V}){const o=V,t=()=>{o("update:modelValue",!1)},{t:i}=qe(),e=_e(),a=_({inputTypes:{},labelWidth:180,submitLoading:!1,addConfig:{group:"",weigh:0,content:""},formItemData:{dict:`key1=value1
key2=value2`}}),K=_({group:[h({name:"required",trigger:"change",message:i("Please select field",{field:i("routine.config.Variable grouping")})})],name:[h({name:"required",title:i("routine.config.Variable name")}),h({name:"varName",message:i("Please enter the correct field",{field:i("routine.config.Variable name")})})],title:[h({name:"required",title:i("routine.config.Variable title")})],type:[h({name:"required",trigger:"change",message:i("Please select field",{field:i("routine.config.Variable type")})})],weigh:[h({name:"integer",title:i("routine.config.number")})]}),s=()=>{e.value&&e.value.validate(x=>{x&&(a.addConfig.content=a.formItemData.dict,delete a.formItemData.dict,Se("add",{...a.addConfig,...a.formItemData}).then(()=>{o("update:modelValue",!1)}))})};return(x,u)=>{const C=A("el-form"),T=A("el-scrollbar"),w=A("el-button"),E=A("el-dialog"),D=B("drag"),I=B("zoom"),U=B("blur");return r(),f(E,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":x.modelValue,onClose:t},{header:v(()=>[Ee((r(),Me("div",Ne,[O(R(d(i)("routine.config.Add configuration item")),1)])),[[D,[".ba-operate-dialog",".el-dialog__header"]],[I,".ba-operate-dialog"]])]),footer:v(()=>[De("div",{style:Ie("width: calc(100% - "+a.labelWidth/1.8+"px)")},[b(w,{onClick:t},{default:v(()=>[O(R(d(i)("Cancel")),1)]),_:1}),Ee((r(),f(w,{loading:a.submitLoading,onClick:u[4]||(u[4]=p=>s()),type:"primary"},{default:v(()=>[O(R(d(i)("Add")),1)]),_:1},8,["loading"])),[[U]])],4)]),default:v(()=>[b(T,{class:"ba-table-form-scrollbar"},{default:v(()=>[De("div",{class:"ba-operate-form ba-add-form",style:Ie("width: calc(100% - "+a.labelWidth/2+"px)")},[b(C,{ref_key:"formRef",ref:e,onKeyup:u[3]||(u[3]=M(p=>s(),["enter"])),rules:K,model:{...a.addConfig,...a.formItemData},"label-position":"right","label-width":160},{default:v(()=>[b(c,{label:d(i)("routine.config.Variable grouping"),type:"select",modelValue:a.addConfig.group,"onUpdate:modelValue":u[0]||(u[0]=p=>a.addConfig.group=p),prop:"group",data:{content:x.configGroup}},null,8,["label","modelValue","data"]),b(Ke,{modelValue:a.formItemData,"onUpdate:modelValue":u[1]||(u[1]=p=>a.formItemData=p)},null,8,["modelValue"]),b(c,{label:d(i)("Weigh"),type:"number",modelValue:a.addConfig.weigh,"onUpdate:modelValue":u[2]||(u[2]=p=>a.addConfig.weigh=p),modelModifiers:{number:!0},prop:"weigh"},null,8,["label","modelValue"])]),_:1},8,["rules","model"])],4)]),_:1})]),_:1},8,["model-value"])}}});export{Ge as _,$e as a,Le as d,Fe as i,Se as p};
