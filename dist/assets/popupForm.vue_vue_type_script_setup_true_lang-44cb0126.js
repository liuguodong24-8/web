import{h as Y,w as u,au as Z,r as H,E as J,q as s,X as v,o as r,O as d,P as n,_ as b,k as g,V as h,U as y,z as e,m as _,l as F,p as m,$ as Q,ac as C,a8 as V,Z as P,Y as U,W as ee}from"./vue-5df46ab8.js";import{t as le,g as z,ae as D}from"./index-ff2ea991.js";import{F as $}from"./index-4fdfed13.js";import{b as I}from"./validate-358b5494.js";const te={class:"title"},ae={class:"select-container"},oe={class:"select-container"},me=Y({__name:"popupForm",setup(ne){const c=u([]),p=u([]),k=u([]),w=u([]),f=u(),l=Z("baTable"),{t:o}=le(),L=H({update_time:[I({name:"date",title:o("activity.update_time")})],create_time:[I({name:"date",title:o("activity.create_time")})]}),N=()=>{z({url:D()+"/admin/dev/schoolListBySchool",method:"get"}).then(i=>{k.value=i.data}).catch(i=>{console.error("请求数据失败",i)})},W=i=>{z({url:D()+"/admin/dev/schoolListBySchool",method:"get",params:{key:i}}).then(t=>{w.value=t.data}).catch(t=>{console.error("请求数据失败",t)})},E=()=>{l.form.items.selectedClass=p.value},K=()=>{l.form.items.selectedGrade=c.value,W(c.value)};J(()=>{N()});function T(){c.value=[],p.value=[]}return(i,t)=>{const x=s("el-option"),S=s("el-select"),A=s("el-form-item"),M=s("el-form"),O=s("el-scrollbar"),B=s("el-button"),R=s("el-dialog"),j=v("drag"),q=v("zoom"),G=v("loading"),X=v("blur");return r(),d(R,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":["Add","Edit"].includes(e(l).form.operate),onOpened:T,onClose:e(l).toggleForm,width:"50%"},{header:n(()=>[b((r(),g("div",te,[h(y(e(l).form.operate?e(o)(e(l).form.operate):""),1)])),[[j,[".ba-operate-dialog",".el-dialog__header"]],[q,".ba-operate-dialog"]])]),footer:n(()=>[_("div",{style:F("width: calc(100% - "+e(l).form.labelWidth/1.8+"px)")},[m(B,{onClick:t[8]||(t[8]=a=>e(l).toggleForm())},{default:n(()=>[h(y(e(o)("Cancel")),1)]),_:1}),b((r(),d(B,{loading:e(l).form.submitLoading,onClick:t[9]||(t[9]=a=>e(l).onSubmit(f.value)),type:"primary"},{default:n(()=>[h(y(e(l).form.operateIds&&e(l).form.operateIds.length>1?e(o)("Save and edit next item"):e(o)("Save")),1)]),_:1},8,["loading"])),[[X]])],4)]),default:n(()=>[b((r(),d(O,{class:"ba-table-form-scrollbar"},{default:n(()=>[_("div",{class:Q(["ba-operate-form","ba-"+e(l).form.operate+"-form"]),style:F("width: calc(100% - "+e(l).form.labelWidth/2+"px)")},[e(l).form.loading?ee("",!0):(r(),d(M,{key:0,ref_key:"formRef",ref:f,onSubmit:t[6]||(t[6]=C(()=>{},["prevent"])),onKeyup:t[7]||(t[7]=V(a=>e(l).onSubmit(f.value),["enter"])),model:e(l).form.items,"label-position":"right","label-width":e(l).form.labelWidth+"px",rules:L},{default:n(()=>[m(A,{label:e(o)("选择年级")},{default:n(()=>[_("div",ae,[m(S,{class:"el-select",modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a),clearable:"",placeholder:"选择年级",onChange:K,filterable:""},{default:n(()=>[(r(!0),g(P,null,U(k.value,a=>(r(),d(x,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_("div",oe,[m(S,{class:"el-select",modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=a=>p.value=a),clearable:"",placeholder:"选择班级或者学生",onChange:E,filterable:""},{default:n(()=>[(r(!0),g(P,null,U(w.value,a=>(r(),d(x,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1},8,["label"]),m($,{label:e(o)("activity.act_name"),type:"string",modelValue:e(l).form.items.act_name,"onUpdate:modelValue":t[2]||(t[2]=a=>e(l).form.items.act_name=a),prop:"act_name",placeholder:e(o)("Please input field",{field:e(o)("activity.act_name")})},null,8,["label","modelValue","placeholder"]),m($,{label:e(o)("activity.act_cont"),type:"textarea",modelValue:e(l).form.items.act_cont,"onUpdate:modelValue":t[3]||(t[3]=a=>e(l).form.items.act_cont=a),prop:"act_cont","input-attr":{rows:3},onKeyup:[t[4]||(t[4]=V(C(()=>{},["stop"]),["enter"])),t[5]||(t[5]=V(C(a=>e(l).onSubmit(f.value),["ctrl"]),["enter"]))],placeholder:e(o)("Please input field",{field:e(o)("activity.act_cont")})},null,8,["label","modelValue","placeholder"])]),_:1},8,["model","label-width","rules"]))],6)]),_:1})),[[G,e(l).form.loading]])]),_:1},8,["model-value","onClose"])}}});export{me as _};
