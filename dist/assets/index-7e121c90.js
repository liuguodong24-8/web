import{d as N,b as M,T as A,a as G}from"./index-cfb50cde.js";import{q as U,t as D,a1 as O,g as p,ah as i}from"./index-a32a01c5.js";import{_ as R}from"./popupForm.vue_vue_type_script_setup_true_lang-4c74510c.js";import{h as $,w as o,ap as H,E as Q,q as m,o as n,k as b,z as g,O as h,W,p as s,P as c,m as F,Z as f,Y as z,V as Y}from"./vue-9888607f.js";import"./index-280d7cc1.js";import"./index-7c3dd670.js";import"./validate-1cd91476.js";const Z={class:"default-main ba-table-box"},j={class:"multiselect-search"},ne=$({name:"dev",__name:"index",setup(J){const u=o([]),d=o([]),v=o([]),k=o([]),L=o([]),q=o([]);o("");const E=()=>{P()},P=()=>{p({url:i()+"/admin/DevList/index",method:"get",params:{school:u.value,grade:d.value,class:v.value}}).then(l=>{t.table.data=l.data.list}).catch(l=>{console.error("请求数据失败",l)})},V=()=>{p({url:i()+"/admin/dev/schoolList",method:"get"}).then(l=>{k.value=l.data}).catch(l=>{console.error("请求数据失败",l)})},C=l=>{p({url:i()+"/admin/dev/schoolList",method:"get",params:{key:l}}).then(r=>{L.value=r.data}).catch(r=>{console.error("请求数据失败",r)})},K=l=>{p({url:i()+"/admin/dev/schoolList",method:"get",params:{key:l}}).then(r=>{q.value=r.data}).catch(r=>{console.error("请求数据失败",r)})},x=()=>{C(u.value)},S=()=>{K(d.value)};U();const{t:e}=D(),I=o(),T=N(["edit","delete"]),t=new M(new O("/admin/DevList/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:e("dev.user_avatar"),prop:"user_avatar",align:"center",render:"image",operator:!1},{label:e("学生名"),prop:"user_name",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("学段名"),prop:"period.phase_name",align:"center",operatorPlaceholder:e("Fuzzy query"),render:"tags",operator:"LIKE"},{label:e("年级名"),prop:"grade.grade_name",align:"center",operatorPlaceholder:e("Fuzzy query"),render:"tags",operator:"LIKE"},{label:e("班级名"),prop:"class_name",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("dev.in_year"),prop:"in_year",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("学校名"),prop:"school_name",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("班主任手机号"),prop:"teacher_mobile",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("班主任"),prop:"teacher_name",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("监护人"),prop:"guardian_name",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("监护人手机"),prop:"guardian_mobile",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:"设备号",prop:"device_id",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:"mac地址",prop:"mac_id",align:"center",operatorPlaceholder:e("Fuzzy query"),render:"tags",operator:"LIKE"},{label:"状态",prop:"device_status",align:"center",operatorPlaceholder:e("Fuzzy query"),render:"tags",operator:"LIKE",replaceValue:{0:"正常",1:"遗失",2:"损坏"}},{label:e("更新时间"),prop:"update_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:e("Operate"),align:"center",width:100,render:"buttons",buttons:T,operator:!1}],dblClickNotEditColumn:[void 0]},{defaultItems:{}});return H("baTable",t),Q(()=>{var l;t.table.ref=I.value,t.mount(),(l=t.getIndex())==null||l.then(()=>{t.initSort(),t.dragSort()}),V()}),(l,r)=>{const w=m("el-alert"),y=m("el-option"),_=m("el-select"),B=m("el-button");return n(),b("div",Z,[g(t).table.remark?(n(),h(w,{key:0,class:"ba-table-alert",title:g(t).table.remark,type:"info","show-icon":""},null,8,["title"])):W("",!0),s(A,{buttons:["delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":g(e)("Quick search placeholder",{fields:"搜索字段"}),onMultiselectSearch:E},{refreshPrepend:c(()=>[F("div",null,[F("div",j,[s(_,{style:{"margin-left":"20px"},modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=a=>u.value=a),onChange:x,clearable:"",filterable:""},{default:c(()=>[(n(!0),b(f,null,z(k.value,a=>(n(),h(y,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(_,{style:{"margin-left":"20px"},modelValue:d.value,"onUpdate:modelValue":r[1]||(r[1]=a=>d.value=a),onChange:S,clearable:"",filterable:""},{default:c(()=>[(n(!0),b(f,null,z(L.value,a=>(n(),h(y,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(_,{style:{"margin-left":"20px"},modelValue:v.value,"onUpdate:modelValue":r[2]||(r[2]=a=>v.value=a),clearable:"",filterable:""},{default:c(()=>[(n(!0),b(f,null,z(q.value,a=>(n(),h(y,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(B,{onClick:E},{default:c(()=>[Y("查询")]),_:1})])])]),_:1},8,["quick-search-placeholder"]),s(G,{ref_key:"tableRef",ref:I},null,512),s(R)])}}});export{ne as default};
